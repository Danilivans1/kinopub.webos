(this["webpackJsonpkinopub.webos"]=this["webpackJsonpkinopub.webos"]||[]).push([[11],{1058:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return h}));var r=t(73),c=t(2),u=t(31),a=t(929),i=t.n(a),o=t(956),l=t(888),s=t(922),d=t(903),f=t(11),b={useHistoryReplace:!1,deserialize:function(e){return e},serialize:function(e){return String(e)}};var v=function(e,n,t){var r=Object(u.g)(),a=Object(c.useMemo)((function(){return Object(f.a)(Object(f.a)({},b),t)}),[t]),i=Object(c.useMemo)((function(){var t=new URLSearchParams(r.location.search).get(e);return t?a.deserialize(t):n}),[e,n,a,r.location.search]),o=Object(c.useCallback)((function(n,t){var c=r.location,u=c.search,i=new URLSearchParams(u),o=a.serialize(n);o?i.set(e,o):i.delete(e);var l="?".concat(i);u!==l&&(t||a.useHistoryReplace?r.replace:r.push)({search:l,hash:c.hash,pathname:c.pathname},c.state)}),[e,a,r]),l=Object(c.useCallback)((function(e){o(n,e)}),[n,o]);return[i,o,l]},j=t(3);function O(e){return i()(e,"year","desc")}var h=function(){var e,n,t=Object(u.h)(),a=v("q",""),i=Object(r.a)(a,2),f=i[0],b=i[1],h=Object(d.a)("itemsSearch",[{q:f,type:null===(e=t.state)||void 0===e?void 0:e.type,field:null===(n=t.state)||void 0===n?void 0:n.field}]),m=Object(c.useCallback)((function(e){b(e)}),[b]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.a,{title:"\u041f\u043e\u0438\u0441\u043a"}),Object(j.jsx)("div",{className:"m-1 mb-3 mr-2",children:Object(j.jsx)(o.a,{autoFocus:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430 \u0438\u043b\u0438 \u0441\u0435\u0440\u0438\u0430\u043b\u0430...",value:f,onChange:m})}),f.length>=3&&Object(j.jsx)(s.a,{queryResult:h,processItems:O})]})}},888:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t(11),c=t(893),u=t(3),a=function(e){return Object(u.jsx)(c.a,Object(r.a)({defaultTitle:"Unknown",titleTemplate:"%s | Kinopub WebOS"},e))}},890:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var r=t(11),c=t(57),u=t(2),a=t(52),i=t.n(a),o=t(73),l=t(106),s=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{disconnectOnLeave:!1},c=n.onEnterViewport,a=n.onLeaveViewport,i=Object(u.useState)(),s=Object(o.a)(i,2),d=s[1],f=Object(u.useRef)(null),b=Object(u.useRef)(!1),v=Object(u.useRef)(!1),j=Object(u.useRef)(0),O=Object(u.useRef)(0),h=Object(u.useCallback)((function(){if(e.current&&f.current){var n=Object(l.findDOMNode)(e.current);n&&f.current.observe(n)}}),[e,f]),m=Object(u.useCallback)((function(){if(e.current&&f.current){var n=Object(l.findDOMNode)(e.current);n&&(f.current.unobserve(n),f.current.disconnect(),f.current=null)}}),[e,f]),p=Object(u.useCallback)((function(e){var n=e[0]||{},t=n.isIntersecting,u=n.intersectionRatio,i="undefined"!==typeof t?t:u>0;if(!v.current&&i)return v.current=!0,null===c||void 0===c||c(),j.current+=1,b.current=i,void d(i);v.current&&!i&&(v.current=!1,null===a||void 0===a||a(),r.disconnectOnLeave&&f.current&&f.current.disconnect(),O.current+=1,b.current=i,d(i))}),[f,r.disconnectOnLeave,c,a]),x=Object(u.useCallback)((function(){f.current||(f.current=new IntersectionObserver(p,t))}),[f,t,p]);return Object(u.useEffect)((function(){return x(),h(),function(){m()}}),[x,h,m]),{inViewport:b.current,enterCount:j.current,leaveCount:O.current}},d=t(3),f=["children","className","onScrollToEnd"],b=function(e){var n=e.children,t=e.className,a=e.onScrollToEnd,o=Object(c.a)(e,f),l=Object(u.useRef)(null);return s(l,{onEnterViewport:a}),Object(d.jsxs)("div",Object(r.a)(Object(r.a)({className:i()("overflow-y-auto h-full",t)},o),{},{children:[n,Object(d.jsx)("div",{className:"h-40",ref:l})]}))}},891:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r=t(11),c=t(57),u=t(52),a=t.n(u),i=t(251),o=t(3),l=["className","wrapperClassName","source","caption","children"],s=function(e){var n=e.className,t=e.wrapperClassName,u=e.source,s=e.caption,d=e.children,f=Object(c.a)(e,l);return Object(o.jsx)(i.a,Object(r.a)(Object(r.a)({},f),{},{className:a()("rounded-xl w-1/5",t),children:Object(o.jsxs)("div",{className:a()("h-40 m-1 flex flex-col relative overflow-hidden cursor-pointer",n),children:[Object(o.jsx)("img",{loading:"lazy",className:"w-full h-full object-cover rounded-xl border-2 border-gray-300 bg-gray-300",src:u,alt:s}),Object(o.jsx)("div",{className:"px-2",children:Object(o.jsx)("p",{className:"text-gray-200 text-sm text-center overflow-hidden whitespace-nowrap",children:s})}),d]})}))}},895:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var r=t(105),c=t(2),u=t(52),a=t.n(u),i=t(193),o=t.n(i),l=t(890),s=t(252),d=t(31),f=t(891),b=t(7),v=t(3),j=function(e){var n=e.item,t=e.className,r=Object(d.g)(),u=Object(c.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.title)||void 0===e?void 0:e.split("/")[0]}),[null===n||void 0===n?void 0:n.title]),i=Object(c.useCallback)((function(){(null===n||void 0===n?void 0:n.id)&&r.push(Object(b.b)(b.a.Item,{itemId:n.id}))}),[null===n||void 0===n?void 0:n.id,r]);return Object(v.jsx)(f.a,{onClick:i,source:null===n||void 0===n?void 0:n.posters.medium,caption:u,className:a()("h-72",t),children:(null===n||void 0===n?void 0:n.new)&&Object(v.jsx)("div",{className:"absolute bg-red-600 border-gray-300 border-t-2 border-r-2 text-gray-200 px-2 py-1 rounded-bl rounded-tr-xl top-0 right-0",children:null===n||void 0===n?void 0:n.new})})},O=function(e){var n=e.title,t=e.items,c=e.loading,u=e.onScrollToEnd,i=e.scrollable,d=void 0===i||i,f=e.className,b=Object(v.jsxs)("div",{children:[n&&Object(v.jsx)(s.a,{className:"m-1 mb-3",children:n}),Object(v.jsxs)("div",{className:a()("flex flex-wrap",f),children:[o()(t,(function(e){return Object(v.jsx)(j,{item:e},e.id)})),c&&o()(Object(r.a)(new Array(15)),(function(e,n){return Object(v.jsx)(j,{},n)}))]})]});return d?Object(v.jsx)(l.a,{onScrollToEnd:u,children:b}):b}},901:function(e,n,t){"use strict";var r=t(73),c=t(2),u=t(897),a=t.n(u),i=t(905),o=t.n(i),l=t(898),s=t.n(l);n.a=function(e,n){var t=e.data,u=e.isLoading,i=e.isFetchingNextPage,l=e.fetchNextPage,d=Object(c.useState)(!1),f=Object(r.a)(d,2),b=f[0],v=f[1],j=Object(c.useMemo)((function(){return s()(a()(o()(null===t||void 0===t?void 0:t.pages,(function(e){return e.items}))),"id")}),[null===t||void 0===t?void 0:t.pages]),O=Object(c.useMemo)((function(){return n?n(j):j}),[j,n]),h=Object(c.useCallback)((function(){b&&(l(),v(!1))}),[b,l]);return Object(c.useEffect)((function(){v(!0)}),[j.length]),[O,u||i,h]}},903:function(e,n,t){"use strict";var r=t(11),c=t(105),u=t(2),a=t(955),i=t(253);n.a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,o=Object(u.useMemo)((function(){return new i.c}),[]),l=Object(a.a)([e].concat(Object(c.a)(n)),(function(t){var r=t.pageParam;return o[e].apply(o,Object(c.a)(n).concat([r]))}),Object(r.a)({getNextPageParam:function(e){var n;return(null===e||void 0===e||null===(n=e.pagination)||void 0===n?void 0:n.current)+1||1}},t));return l}},922:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t(73),c=t(895),u=t(901),a=t(3),i=function(e){var n=e.title,t=e.queryResult,i=e.processItems,o=Object(u.a)(t,i),l=Object(r.a)(o,3),s=l[0],d=l[1],f=l[2];return Object(a.jsx)(c.a,{title:n,items:s,loading:d,onScrollToEnd:f})}},929:function(e,n,t){var r=t(943),c=t(58);e.exports=function(e,n,t,u){return null==e?[]:(c(n)||(n=null==n?[]:[n]),c(t=u?void 0:t)||(t=null==t?[]:[t]),r(e,n,t))}},943:function(e,n,t){var r=t(263),c=t(264),u=t(376),a=t(395),i=t(944),o=t(393),l=t(945),s=t(394),d=t(58);e.exports=function(e,n,t){n=n.length?r(n,(function(e){return d(e)?function(n){return c(n,1===e.length?e[0]:e)}:e})):[s];var f=-1;n=r(n,o(u));var b=a(e,(function(e,t,c){return{criteria:r(n,(function(n){return n(e)})),index:++f,value:e}}));return i(b,(function(e,n){return l(e,n,t)}))}},944:function(e,n){e.exports=function(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}},945:function(e,n,t){var r=t(946);e.exports=function(e,n,t){for(var c=-1,u=e.criteria,a=n.criteria,i=u.length,o=t.length;++c<i;){var l=r(u[c],a[c]);if(l)return c>=o?l:l*("desc"==t[c]?-1:1)}return e.index-n.index}},946:function(e,n,t){var r=t(194);e.exports=function(e,n){if(e!==n){var t=void 0!==e,c=null===e,u=e===e,a=r(e),i=void 0!==n,o=null===n,l=n===n,s=r(n);if(!o&&!s&&!a&&e>n||a&&i&&l&&!o&&!s||c&&i&&l||!t&&l||!u)return 1;if(!c&&!a&&!s&&e<n||s&&t&&u&&!c&&!a||o&&t&&u||!i&&u||!l)return-1}return 0}},956:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var r=t(11),c=t(57),u=t(2),a=t(106),i=t(975),o=t.n(i),l=t(52),s=t.n(l),d=t(3),f=["className","onChange","autoFocus"],b=function(e){var n=e.className,t=e.onChange,i=e.autoFocus,l=Object(c.a)(e,f),b=Object(u.useRef)(null),v=Object(u.useCallback)((function(e){var n=e.value;null===t||void 0===t||t(n)}),[t]);return Object(u.useEffect)((function(){var e;return i&&(e=requestAnimationFrame((function(){var e,n=Object(a.findDOMNode)(b.current);null===n||void 0===n||null===(e=n.querySelector("input"))||void 0===e||e.focus()}))),function(){e&&cancelAnimationFrame(e)}}),[b,i]),Object(d.jsx)(o.a,Object(r.a)(Object(r.a)({},l),{},{ref:b,className:s()("w-full",n),onChange:v}))}}}]);
//# sourceMappingURL=11.d81e9bce.chunk.js.map