{"version":3,"sources":["hooks/useInViewport.ts","hooks/useUniqueId.ts","components/scrollable/scrollable.tsx","hooks/useApi.ts","components/text/text.tsx","components/lazy/lazy.tsx","components/videoItem/videoItem.tsx","components/itemsList/itemsList.tsx","components/popup/popup.tsx","../node_modules/@enact/moonstone/Popup/Popup.js","components/button/button.tsx","../node_modules/@enact/moonstone/Popup/Popup.module.css","utils/item.ts","../node_modules/lodash/find.js","../node_modules/lodash/_createFind.js","components/seasonItem/seasonItem.tsx","components/seasonsList/seasonsList.tsx","containers/bookmarks/bookmarks.tsx","hooks/useStreamingTypeEffect.ts","views/item/item.tsx"],"names":["useInViewport","target","props","options","config","disconnectOnLeave","onEnterViewport","onLeaveViewport","useState","forceUpdate","observer","useRef","inViewportRef","intersected","enterCountRef","leaveCountRef","startObserver","useCallback","current","node","findDOMNode","observe","stopObserver","unobserve","disconnect","handleIntersection","entries","entry","isIntersecting","intersectionRatio","isInViewport","initIntersectionObserver","IntersectionObserver","useEffect","inViewport","enterCount","leaveCount","useUniqueId","prefix","uid","useUID","useMemo","Footer","styled","div","ScrollableContext","createContext","Scrollable","children","onScrollToEnd","footerRef","id","value","direction","verticalScrollbar","horizontalScrollbar","Provider","ref","useApi","method","params","client","ApiClient","query","useQuery","Text","BodyText","Lazy","scrollableId","useContext","once","offset","scrollContainer","Wrapper","GridItem","GridListImageItem","New","VideoItem","item","history","useHistory","handleOnClick","push","generatePath","PATHS","Item","itemId","height","new","source","posters","medium","caption","title","onClick","ItemsList","items","loading","scrollable","content","map","Array","_","idx","Popup","visible","onVisibilityChange","handleShow","handleClose","listiner","e","isBackButton","stopPropagation","window","addEventListener","removeEventListener","open","onShow","onClose","Object","defineProperty","exports","PopupBase","_keymap","require","_dispatcher","_Layout","_FloatingLayer","_interopRequireDefault","_kind","_react","_propTypes","_spotlight","obj","__esModule","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireWildcard","_Pause","_SpotlightContainerDecorator","_Transition","_handle","_$L","_IconButton","_Skinnable","_PopupModule","_jsxRuntime","WeakMap","_defineProperties","i","length","descriptor","enumerable","configurable","writable","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","this","constructor","arguments","apply","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","getPrototypeOf","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","isUp","is","TransitionContainer","enterTo","preserveId","getContainerNode","containerId","document","querySelector","concat","forwardHide","forward","forwardShow","name","propTypes","isRequired","closeButtonAriaLabel","string","css","noAnimation","bool","onCloseButtonClick","func","onHide","showCloseButton","shrinkBody","spotlightId","spotlightRestrict","oneOf","defaultProps","styles","className","publicClassNames","computed","_ref","styler","append","reserveClose","closeButton","_ref2","ariaLabel","jsx","Cell","shrink","closeContainer","backgroundOpacity","size","onTap","render","_ref3","rest","popupTransitionContainer","duration","spotlightDisabled","type","jsxs","Row","role","body","SkinnedPopupBase","defaultSkin","checkScrimNone","scrimType","OpenState","_Component","subClass","superClass","TypeError","create","_inherits","Constructor","protoProps","staticProps","_super","_this","instance","_classCallCheck","handleFloatingLayerOpen","state","popupOpen","spotPopupContent","setState","handleKeyDown","ev","focusChanged","_this$props","keyCode","getDirection","spottables","getSpottableDescendants","getCurrent","move","preventDefault","setPointerMode","handlePopupHide","floatLayerOpen","activator","currentTarget","getAttribute","paused","resume","spotActivator","handlePopupShow","containerNode","off","contains","focus","on","blur","setActiveContainer","prevOpen","add","prevProps","prevState","pause","remove","_this$props2","noAutoDismiss","onOpen","onDismiss","Component","onKeyDown","_default","StyledButton","EnactButton","ButtonInner","Icon","iconOnly","Button","icon","module","getItemTitle","video","season","number","find","createFind","baseIteratee","isArrayLike","findIndexFunc","collection","predicate","fromIndex","iterable","iteratee","index","undefined","EpisodeItem","watched","SeasonItem","handleEpisodeClick","episode","Video","videoId","episodes","thumbnail","WatchingStatus","Watched","SeasonsList","seasons","BookmarkItem","Bookmarks","data","itemBookmarks","dataUpdatedAt","refetch","bookmarkToggleItemAsync","useApiMutation","bookmarksIds","folders","bookmark","handleCheckboxToggle","a","defaultSelected","includes","onToggle","updated","useStreamingTypeEffect","streamingTypes","deviceInfo","useStorageState","setStreamingType","selectedStreamingType","device","settings","streamingType","selected","Bool","True","code","Cover","Poster","src","Title","Actions","Description","TrackList","SimilarList","SimilarItems","ItemView","useParams","setVisible","staleTime","watchingToggleWatchlistAsync","videos","watching","status","trailer","videoToPlay","handleOnPlayClick","handleOnTrailerClick","Trailer","trailerId","handleOnBookmarksClick","handleOnVisibilityClick","wide","big","subscribed","plot","tracklist","track"],"mappings":"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","file":"static/js/13.b39f2fd3.chunk.js","sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\nimport { findDOMNode } from 'react-dom';\n\ntype Props = {\n  onEnterViewport?: () => void;\n  onLeaveViewport?: () => void;\n};\n\nconst useInViewport = (\n  target: React.MutableRefObject<React.ReactInstance | null | undefined>,\n  props: Props,\n  options?: IntersectionObserverInit,\n  config = { disconnectOnLeave: false },\n) => {\n  const { onEnterViewport, onLeaveViewport } = props;\n  const [, forceUpdate] = useState();\n\n  const observer = useRef<IntersectionObserver | null>(null);\n\n  const inViewportRef = useRef(false);\n  const intersected = useRef(false);\n\n  const enterCountRef = useRef(0);\n  const leaveCountRef = useRef(0);\n\n  const startObserver = useCallback(() => {\n    if (target.current && observer.current) {\n      const node = findDOMNode(target.current) as Element;\n      if (node) {\n        observer.current.observe(node);\n      }\n    }\n  }, [target, observer]);\n\n  const stopObserver = useCallback(() => {\n    if (target.current && observer.current) {\n      const node = findDOMNode(target.current) as Element;\n      if (node) {\n        observer.current.unobserve(node);\n        observer.current.disconnect();\n        observer.current = null;\n      }\n    }\n  }, [target, observer]);\n\n  const handleIntersection = useCallback(\n    (entries) => {\n      const entry = entries[0] || {};\n      const { isIntersecting, intersectionRatio } = entry;\n      const isInViewport = typeof isIntersecting !== 'undefined' ? isIntersecting : intersectionRatio > 0;\n\n      // enter\n      if (!intersected.current && isInViewport) {\n        intersected.current = true;\n\n        onEnterViewport?.();\n\n        enterCountRef.current += 1;\n        inViewportRef.current = isInViewport;\n\n        forceUpdate(isInViewport);\n\n        return;\n      }\n\n      // leave\n      if (intersected.current && !isInViewport) {\n        intersected.current = false;\n\n        onLeaveViewport?.();\n\n        if (config.disconnectOnLeave && observer.current) {\n          // disconnect obsever on leave\n          observer.current.disconnect();\n        }\n\n        leaveCountRef.current += 1;\n        inViewportRef.current = isInViewport;\n\n        forceUpdate(isInViewport);\n      }\n    },\n    [observer, config.disconnectOnLeave, onEnterViewport, onLeaveViewport],\n  );\n\n  const initIntersectionObserver = useCallback(() => {\n    if (!observer.current) {\n      observer.current = new IntersectionObserver(handleIntersection, options);\n    }\n  }, [observer, options, handleIntersection]);\n\n  useEffect(() => {\n    initIntersectionObserver();\n    startObserver();\n\n    return () => {\n      stopObserver();\n    };\n  }, [initIntersectionObserver, startObserver, stopObserver]);\n\n  return {\n    inViewport: inViewportRef.current,\n    enterCount: enterCountRef.current,\n    leaveCount: leaveCountRef.current,\n  };\n};\n\nexport default useInViewport;\n","import { useMemo } from 'react';\nimport { useUID } from 'react-uid';\n\nfunction useUniqueId(prefix: string) {\n  const uid = useUID();\n  const id = useMemo(() => `${prefix}-${uid}`, [prefix, uid]);\n\n  return id;\n}\n\nexport default useUniqueId;\n","import { createContext, useMemo, useRef } from 'react';\nimport Scroller, { ScrollerProps } from '@enact/moonstone/Scroller';\nimport styled from 'styled-components';\n\nimport useInViewport from 'hooks/useInViewport';\nimport useUniqueId from 'hooks/useUniqueId';\n\nconst Footer = styled.div`\n  height: 5rem;\n`;\n\nexport const ScrollableContext = createContext<{ id?: string }>({});\n\ntype Props = {\n  onScrollToEnd?: () => void;\n} & ScrollerProps;\n\nconst Scrollable: React.FC<Props> = ({ children, onScrollToEnd, ...props }) => {\n  const footerRef = useRef<HTMLDivElement>(null);\n  const id = useUniqueId('scrollable');\n  const value = useMemo(\n    () => ({\n      id,\n    }),\n    [id],\n  );\n\n  useInViewport(footerRef, { onEnterViewport: onScrollToEnd });\n\n  return (\n    <Scroller id={id} direction=\"vertical\" verticalScrollbar=\"hidden\" horizontalScrollbar=\"hidden\" {...props}>\n      <ScrollableContext.Provider value={value}>{children}</ScrollableContext.Provider>\n      <Footer ref={footerRef} />\n    </Scroller>\n  );\n};\n\nexport default Scrollable;\n","import { useMemo } from 'react';\nimport { UseQueryOptions, useQuery } from 'react-query';\n\nimport ApiClient from 'api';\n\ntype Unpromise<T> = T extends Promise<infer U> ? U : T;\n\nexport type Methods = {\n  [method in keyof ApiClient]: ApiClient[method] extends Function ? Unpromise<ReturnType<ApiClient[method]>> : never;\n};\n\nexport type Method = keyof ApiClient & string;\n\nfunction useApi<T extends Method>(\n  method: T,\n  params: Parameters<ApiClient[T]> = [] as Parameters<ApiClient[T]>,\n  options?: UseQueryOptions<Methods[T]>,\n) {\n  const client = useMemo(() => new ApiClient(), []);\n  const query = useQuery<Methods[T]>(\n    [method, ...params],\n    () =>\n      // @ts-expect-error\n      client[method](...params) as Methods[T],\n    options,\n  );\n\n  return query;\n}\n\nexport default useApi;\n","import BodyText from '@enact/moonstone/BodyText';\nimport styled from 'styled-components';\n\nconst Text = styled(BodyText)``;\n\nexport default Text;\n","import { useContext } from 'react';\nimport LazyLoad, { LazyLoadProps } from 'react-lazyload';\n\nimport { ScrollableContext } from 'components/scrollable';\n\ntype Props = {} & LazyLoadProps;\n\nconst Lazy: React.FC<Props> = (props) => {\n  const { id: scrollableId } = useContext(ScrollableContext);\n\n  return <LazyLoad once offset={100} scrollContainer={scrollableId && `#${scrollableId}`} {...props} />;\n};\n\nexport function withLazy(options: Props) {\n  return function WithLazy<P>(Component: React.ComponentType<P>): React.FC<P> {\n    return (props: P) => (\n      <Lazy {...options}>\n        <Component {...props} />\n      </Lazy>\n    );\n  };\n}\n\nexport default Lazy;\n","import { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport GridListImageItem from '@enact/moonstone/GridListImageItem';\nimport styled from 'styled-components';\n\nimport { Item } from 'api';\nimport Lazy from 'components/lazy';\nimport { PATHS, generatePath } from 'routes';\n\nconst Wrapper = styled(Lazy)`\n  display: inline-flex;\n  position: relative;\n  height: 20rem !important;\n  width: 20%;\n`;\n\nconst GridItem = styled(GridListImageItem)`\n  width: 100%;\n`;\n\nconst New = styled.div`\n  position: absolute;\n  background: var(--main-color);\n  right: 0;\n  z-index: 1;\n  padding: 0 0.5em;\n  font-size: 0.75rem;\n  margin-top: 0.25rem;\n  margin-right: 0.25rem;\n`;\n\ntype Props = {\n  item?: Item;\n};\n\nconst VideoItem: React.FC<Props> = ({ item }) => {\n  const history = useHistory();\n\n  const handleOnClick = useCallback(() => {\n    if (item?.id) {\n      history.push(\n        generatePath(PATHS.Item, {\n          itemId: item.id,\n        }),\n      );\n    }\n  }, [item?.id, history]);\n\n  return (\n    <Wrapper height=\"20rem\">\n      <New>{item?.new}</New>\n      <GridItem source={item?.posters.medium} caption={item?.title} onClick={handleOnClick} />\n    </Wrapper>\n  );\n};\n\nexport default VideoItem;\n","import React from 'react';\nimport map from 'lodash/map';\n\nimport { Item } from 'api';\nimport Scrollable from 'components/scrollable';\nimport VideoItem from 'components/videoItem';\n\ntype Props = {\n  items?: Item[];\n  loading?: boolean;\n  onScrollToEnd?: () => void;\n  scrollable?: boolean;\n};\n\nconst ItemsList: React.FC<Props> = ({ items, loading, onScrollToEnd, scrollable = true }) => {\n  const content = (\n    <>\n      {map(items, (item) => (\n        <VideoItem key={item.id} item={item} />\n      ))}\n      {loading && map([...new Array(15)], (_, idx) => <VideoItem key={idx} />)}\n    </>\n  );\n\n  return scrollable ? <Scrollable onScrollToEnd={onScrollToEnd}>{content}</Scrollable> : content;\n};\n\nexport default ItemsList;\n","import { useCallback, useEffect } from 'react';\nimport MoonstonePopup, { PopupProps } from '@enact/moonstone/Popup';\n\nimport { isBackButton } from 'utils/keyboard';\n\ntype Props = {\n  visible: boolean;\n  onVisibilityChange: (visible: boolean) => void;\n} & Omit<PopupProps, 'open' | 'onShow' | 'onClose'>;\n\nconst Popup: React.FC<Props> = ({ visible, onVisibilityChange, ...props }) => {\n  const handleShow = useCallback(() => {\n    onVisibilityChange(true);\n  }, [onVisibilityChange]);\n  const handleClose = useCallback(() => {\n    onVisibilityChange(false);\n  }, [onVisibilityChange]);\n\n  useEffect(() => {\n    const listiner = (e: KeyboardEvent) => {\n      if (isBackButton(e) && visible) {\n        e.stopPropagation();\n        onVisibilityChange(false);\n      }\n    };\n\n    window.addEventListener('keydown', listiner, true);\n\n    return () => {\n      window.removeEventListener('keydown', listiner, true);\n    };\n  }, [visible, onVisibilityChange]);\n\n  return <MoonstonePopup {...props} open={visible} onShow={handleShow} onClose={handleClose} />;\n};\n\nexport default Popup;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PopupBase = exports.Popup = exports[\"default\"] = void 0;\n\nvar _keymap = require(\"@enact/core/keymap\");\n\nvar _dispatcher = require(\"@enact/core/dispatcher\");\n\nvar _Layout = require(\"@enact/ui/Layout\");\n\nvar _FloatingLayer = _interopRequireDefault(require(\"@enact/ui/FloatingLayer\"));\n\nvar _kind = _interopRequireDefault(require(\"@enact/core/kind\"));\n\nvar _react = require(\"react\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\n\nvar _Pause = _interopRequireDefault(require(\"@enact/spotlight/Pause\"));\n\nvar _SpotlightContainerDecorator = _interopRequireDefault(require(\"@enact/spotlight/SpotlightContainerDecorator\"));\n\nvar _Transition = _interopRequireDefault(require(\"@enact/ui/Transition\"));\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar _$L = _interopRequireDefault(require(\"../internal/$L\"));\n\nvar _IconButton = _interopRequireDefault(require(\"../IconButton\"));\n\nvar _Skinnable = _interopRequireDefault(require(\"../Skinnable\"));\n\nvar _PopupModule = _interopRequireDefault(require(\"./Popup.module.css\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar isUp = (0, _keymap.is)('up');\nvar TransitionContainer = (0, _SpotlightContainerDecorator[\"default\"])({\n  enterTo: 'default-element',\n  preserveId: true\n}, _Transition[\"default\"]);\n\nvar getContainerNode = function getContainerNode(containerId) {\n  return document.querySelector(\"[data-spotlight-id='\".concat(containerId, \"']\"));\n};\n\nvar forwardHide = (0, _handle.forward)('onHide');\nvar forwardShow = (0, _handle.forward)('onShow');\n/**\n * The base popup component.\n *\n * @class PopupBase\n * @memberof moonstone/Popup\n * @ui\n * @public\n */\n\nvar PopupBase = (0, _kind[\"default\"])({\n  name: 'PopupBase',\n  propTypes:\n  /** @lends moonstone/Popup.PopupBase.prototype */\n  {\n    /**\n     * The contents to be displayed in the body of the popup.\n     *\n     * @type {Node}\n     * @required\n     * @public\n     */\n    children: _propTypes[\"default\"].node.isRequired,\n\n    /**\n     * Sets the hint string read when focusing the popup close button.\n     *\n     * @type {String}\n     * @default 'Close'\n     * @public\n     */\n    closeButtonAriaLabel: _propTypes[\"default\"].string,\n\n    /**\n     * Customizes the component by mapping the supplied collection of CSS class names to the\n     * corresponding internal elements and states of this component.\n     *\n     * The following classes are supported:\n     *\n     * * `popup` - The root class name\n     * * `body` - Applied to the body content container\n     * * `closeContainer` - Applied to the close button's container\n     * * `reserveClose` - Applied when the close button is shown and space must be allocated for it\n     *\n     * @type {Object}\n     * @private\n     */\n    css: _propTypes[\"default\"].object,\n\n    /**\n     * Disables transition animation.\n     *\n     * @type {Boolean}\n     * @default false\n     * @public\n     */\n    noAnimation: _propTypes[\"default\"].bool,\n\n    /**\n     * Called when the close button is clicked.\n     *\n     * @type {Function}\n     * @public\n     */\n    onCloseButtonClick: _propTypes[\"default\"].func,\n\n    /**\n     * Called after the popup's \"hide\" transition finishes.\n     *\n     * @type {Function}\n     * @public\n     */\n    onHide: _propTypes[\"default\"].func,\n\n    /**\n     * Called after the popup's \"show\" transition finishes.\n     *\n     * @type {Function}\n     * @public\n     */\n    onShow: _propTypes[\"default\"].func,\n\n    /**\n     * Controls the visibility of the Popup.\n     *\n     * By default, the Popup and its contents are not rendered until `open`.\n     *\n     * @type {Boolean}\n     * @default false\n     * @public\n     */\n    open: _propTypes[\"default\"].bool,\n\n    /**\n     * Shows the close button.\n     *\n     * @type {Boolean}\n     * @default false\n     * @public\n     */\n    showCloseButton: _propTypes[\"default\"].bool,\n\n    /**\n     * Tells the body element to shrink to the size of the content.\n     *\n     * Popup is composed of a [Layout]{@link ui/Layout.Layout} and [Cells]{@link ui/Layout.Cell}.\n     * This informs the body cell to use the [shrink]{@link ui/Layout.Cell#shrink} property so\n     * it will match the dimensions of its contents rather than expand to the width of the\n     * Popup's assigned dimensions.\n     *\n     * @type {Boolean}\n     * @default false\n     * @private\n     */\n    shrinkBody: _propTypes[\"default\"].bool,\n\n    /**\n     * The container id for {@link spotlight/Spotlight}.\n     *\n     * @type {String}\n     * @default null\n     * @public\n     */\n    spotlightId: _propTypes[\"default\"].string,\n\n    /**\n     * Restricts or prioritizes navigation when focus attempts to leave the popup.\n     *\n     * It can be either `'none'`, `'self-first'`, or `'self-only'`.\n     *\n     * Note: The ready-to-use [Popup]{@link moonstone/Popup.Popup} component only supports\n     * `'self-first'` and `'self-only'`.\n     *\n     * @type {String}\n     * @default 'self-only'\n     * @public\n     */\n    spotlightRestrict: _propTypes[\"default\"].oneOf(['none', 'self-first', 'self-only'])\n  },\n  defaultProps: {\n    noAnimation: false,\n    open: false,\n    showCloseButton: false,\n    shrinkBody: false,\n    spotlightRestrict: 'self-only'\n  },\n  styles: {\n    css: _PopupModule[\"default\"],\n    className: 'popup',\n    publicClassNames: ['popup', 'body', 'closeContainer', 'reserveClose']\n  },\n  computed: {\n    className: function className(_ref) {\n      var showCloseButton = _ref.showCloseButton,\n          styler = _ref.styler;\n      return styler.append({\n        reserveClose: showCloseButton\n      });\n    },\n    closeButton: function closeButton(_ref2) {\n      var closeButtonAriaLabel = _ref2.closeButtonAriaLabel,\n          css = _ref2.css,\n          onCloseButtonClick = _ref2.onCloseButtonClick,\n          showCloseButton = _ref2.showCloseButton;\n\n      if (showCloseButton) {\n        var ariaLabel = closeButtonAriaLabel == null ? (0, _$L[\"default\"])('Close') : closeButtonAriaLabel;\n        return /*#__PURE__*/(0, _jsxRuntime.jsx)(_Layout.Cell, {\n          shrink: true,\n          className: css.closeContainer,\n          children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_IconButton[\"default\"], {\n            className: css.closeButton,\n            backgroundOpacity: \"transparent\",\n            size: \"small\",\n            onTap: onCloseButtonClick,\n            \"aria-label\": ariaLabel,\n            children: \"closex\"\n          })\n        });\n      }\n    }\n  },\n  render: function render(_ref3) {\n    var children = _ref3.children,\n        closeButton = _ref3.closeButton,\n        css = _ref3.css,\n        noAnimation = _ref3.noAnimation,\n        onHide = _ref3.onHide,\n        onShow = _ref3.onShow,\n        open = _ref3.open,\n        shrinkBody = _ref3.shrinkBody,\n        spotlightId = _ref3.spotlightId,\n        spotlightRestrict = _ref3.spotlightRestrict,\n        rest = _objectWithoutProperties(_ref3, [\"children\", \"closeButton\", \"css\", \"noAnimation\", \"onHide\", \"onShow\", \"open\", \"shrinkBody\", \"spotlightId\", \"spotlightRestrict\"]);\n\n    delete rest.closeButtonAriaLabel;\n    delete rest.onCloseButtonClick;\n    delete rest.showCloseButton;\n    return /*#__PURE__*/(0, _jsxRuntime.jsx)(TransitionContainer, {\n      className: css.popupTransitionContainer,\n      direction: \"down\",\n      duration: \"short\",\n      noAnimation: noAnimation,\n      onHide: onHide,\n      onShow: onShow,\n      spotlightDisabled: !open,\n      spotlightId: spotlightId,\n      spotlightRestrict: spotlightRestrict,\n      type: \"slide\",\n      visible: open,\n      children: /*#__PURE__*/(0, _jsxRuntime.jsxs)(_Layout.Row, _objectSpread(_objectSpread({\n        \"aria-live\": \"off\",\n        role: \"alert\"\n      }, rest), {}, {\n        children: [/*#__PURE__*/(0, _jsxRuntime.jsx)(_Layout.Cell, {\n          className: css.body,\n          shrink: shrinkBody,\n          children: children\n        }), closeButton]\n      }))\n    });\n  }\n});\nexports.PopupBase = PopupBase;\nvar SkinnedPopupBase = (0, _Skinnable[\"default\"])({\n  defaultSkin: 'light'\n}, PopupBase); // Deprecate using scrimType 'none' with spotlightRestrict of 'self-only'\n\nvar checkScrimNone = function checkScrimNone(props) {\n  var validScrim = !(props.scrimType === 'none' && props.spotlightRestrict === 'self-only');\n  process.env.NODE_ENV !== \"production\" ? (0, _warning[\"default\"])(validScrim, \"Using 'spotlightRestrict' of 'self-only' without a scrim \" + 'is not supported. Use a transparent scrim to prevent spotlight focus outside of the popup') : void 0;\n};\n\nvar OpenState = {\n  CLOSED: 0,\n  OPENING: 1,\n  OPEN: 2\n};\n/**\n * A stateful component that renders a popup in a\n * [FloatingLayer]{@link ui/FloatingLayer.FloatingLayer}.\n *\n * @class Popup\n * @memberof moonstone/Popup\n * @extends moonstone/Popup.PopupBase\n * @ui\n * @public\n */\n\nvar Popup = /*#__PURE__*/function (_Component) {\n  _inherits(Popup, _Component);\n\n  var _super = _createSuper(Popup);\n\n  function Popup(props) {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.call(this, props);\n\n    _this.handleFloatingLayerOpen = function () {\n      if (!_this.props.noAnimation && _this.state.popupOpen !== OpenState.OPEN) {\n        _this.setState({\n          popupOpen: OpenState.OPENING\n        });\n      } else if (_this.state.popupOpen === OpenState.OPEN && _this.props.open) {\n        _this.spotPopupContent();\n      }\n    };\n\n    _this.handleKeyDown = function (ev) {\n      var _this$props = _this.props,\n          onClose = _this$props.onClose,\n          spotlightRestrict = _this$props.spotlightRestrict;\n      var keyCode = ev.keyCode;\n      var direction = (0, _spotlight.getDirection)(keyCode);\n\n      var spottables = _spotlight[\"default\"].getSpottableDescendants(_this.state.containerId).length;\n\n      if (direction && onClose) {\n        var focusChanged;\n\n        if (spottables && _spotlight[\"default\"].getCurrent() && spotlightRestrict !== 'self-only') {\n          focusChanged = _spotlight[\"default\"].move(direction);\n\n          if (focusChanged) {\n            // stop propagation to prevent default spotlight behavior\n            ev.stopPropagation();\n          }\n        }\n\n        if (!spottables || focusChanged === false && isUp(keyCode)) {\n          // prevent default page scrolling\n          ev.preventDefault(); // stop propagation to prevent default spotlight behavior\n\n          ev.stopPropagation(); // set the pointer mode to false on keydown\n\n          _spotlight[\"default\"].setPointerMode(false);\n\n          onClose(ev);\n        }\n      }\n    };\n\n    _this.handlePopupHide = function (ev) {\n      forwardHide(ev, _this.props);\n\n      _this.setState({\n        floatLayerOpen: false,\n        activator: null\n      });\n\n      if (ev.currentTarget.getAttribute('data-spotlight-id') === _this.state.containerId) {\n        _this.paused.resume();\n\n        if (!_this.props.open) {\n          _this.spotActivator(_this.state.activator);\n        }\n      }\n    };\n\n    _this.handlePopupShow = function (ev) {\n      forwardShow(ev, _this.props);\n\n      _this.setState({\n        popupOpen: OpenState.OPEN\n      });\n\n      if (ev.currentTarget.getAttribute('data-spotlight-id') === _this.state.containerId) {\n        _this.paused.resume();\n\n        if (_this.props.open) {\n          _this.spotPopupContent();\n        }\n      }\n    };\n\n    _this.spotActivator = function (activator) {\n      var current = _spotlight[\"default\"].getCurrent();\n\n      var containerNode = getContainerNode(_this.state.containerId);\n      (0, _dispatcher.off)('keydown', _this.handleKeyDown); // if there is no currently-spotted control or it is wrapped by the popup's container, we\n      // know it's safe to change focus\n\n      if (!current || containerNode && containerNode.contains(current)) {\n        // attempt to set focus to the activator, if available\n        if (!_spotlight[\"default\"].focus(activator)) {\n          _spotlight[\"default\"].focus();\n        }\n      }\n    };\n\n    _this.spotPopupContent = function () {\n      var containerId = _this.state.containerId;\n      (0, _dispatcher.on)('keydown', _this.handleKeyDown);\n\n      if (!_spotlight[\"default\"].focus(containerId)) {\n        var current = _spotlight[\"default\"].getCurrent(); // In cases where the container contains no spottable controls or we're in pointer-mode, focus\n        // cannot inherently set the active container or blur the active control, so we must do that\n        // here.\n\n\n        if (current) {\n          current.blur();\n        }\n\n        _spotlight[\"default\"].setActiveContainer(containerId);\n      }\n    };\n\n    _this.paused = new _Pause[\"default\"]('Popup');\n    _this.state = {\n      floatLayerOpen: _this.props.open,\n      popupOpen: _this.props.open ? OpenState.OPEN : OpenState.CLOSED,\n      prevOpen: _this.props.open,\n      containerId: _spotlight[\"default\"].add(),\n      activator: null\n    };\n    checkScrimNone(_this.props);\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: // Spot the content after it's mounted.\n    function componentDidMount() {\n      if (this.props.open && getContainerNode(this.state.containerId)) {\n        this.spotPopupContent();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.open !== prevProps.open) {\n        if (!this.props.noAnimation) {\n          this.paused.pause();\n        } else if (this.props.open) {\n          forwardShow({}, this.props);\n          this.spotPopupContent();\n        } else if (prevProps.open) {\n          forwardHide({}, this.props);\n          this.spotActivator(prevState.activator);\n        }\n      }\n\n      checkScrimNone(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.open) {\n        (0, _dispatcher.off)('keydown', this.handleKeyDown);\n      }\n\n      _spotlight[\"default\"].remove(this.state.containerId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          noAutoDismiss = _this$props2.noAutoDismiss,\n          onClose = _this$props2.onClose,\n          scrimType = _this$props2.scrimType,\n          rest = _objectWithoutProperties(_this$props2, [\"noAutoDismiss\", \"onClose\", \"scrimType\"]);\n\n      delete rest.spotlightRestrict;\n      return /*#__PURE__*/(0, _jsxRuntime.jsx)(_FloatingLayer[\"default\"], {\n        noAutoDismiss: noAutoDismiss,\n        open: this.state.floatLayerOpen,\n        onOpen: this.handleFloatingLayerOpen,\n        onDismiss: onClose,\n        scrimType: scrimType,\n        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(SkinnedPopupBase, _objectSpread(_objectSpread({}, rest), {}, {\n          \"data-webos-voice-exclusive\": true,\n          onCloseButtonClick: onClose,\n          onHide: this.handlePopupHide,\n          onShow: this.handlePopupShow,\n          open: this.state.popupOpen >= OpenState.OPENING,\n          spotlightId: this.state.containerId,\n          spotlightRestrict: \"self-only\"\n        }))\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.open !== state.prevOpen) {\n        if (props.open) {\n          return {\n            popupOpen: props.noAnimation || state.floatLayerOpen ? OpenState.OPEN : OpenState.CLOSED,\n            floatLayerOpen: true,\n            activator: _spotlight[\"default\"].getCurrent(),\n            prevOpen: props.open\n          };\n        } else {\n          return {\n            popupOpen: OpenState.CLOSED,\n            floatLayerOpen: state.popupOpen !== OpenState.CLOSED ? !props.noAnimation : false,\n            activator: props.noAnimation ? null : state.activator,\n            prevOpen: props.open\n          };\n        }\n      }\n\n      return null;\n    }\n  }]);\n\n  return Popup;\n}(_react.Component);\n\nexports.Popup = Popup;\nPopup.propTypes =\n/** @lends moonstone/Popup.Popup.prototype */\n{\n  /**\n   * Hint string read when focusing the popup close button.\n   *\n   * @type {String}\n   * @default 'Close'\n   * @public\n   */\n  closeButtonAriaLabel: _propTypes[\"default\"].string,\n\n  /**\n   * Disables transition animation.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  noAnimation: _propTypes[\"default\"].bool,\n\n  /**\n   * Indicates that the popup will not trigger `onClose` on the *ESC* key press.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  noAutoDismiss: _propTypes[\"default\"].bool,\n\n  /**\n   * Called on:\n   *\n   * * pressing `ESC` key,\n   * * clicking on the close button, or\n   * * moving spotlight focus outside the boundary of the popup when `spotlightRestrict` is\n   *   `'self-first'`.\n   *\n   * It is the responsibility of the callback to set the `open` property to `false`.\n   *\n   * @type {Function}\n   * @public\n   */\n  onClose: _propTypes[\"default\"].func,\n\n  /**\n   * Called after hide transition has completed, and immediately with no transition.\n   *\n   * @type {Function}\n   * @public\n   */\n  onHide: _propTypes[\"default\"].func,\n\n  /**\n   * Called when a key is pressed.\n   *\n   * @type {Function}\n   * @public\n   */\n  onKeyDown: _propTypes[\"default\"].func,\n\n  /**\n   * Called after show transition has completed, and immediately with no transition.\n   *\n   * Note: The function does not run if Popup is initially opened and\n   * [noAnimation]{@link moonstone/Popup.PopupBase#noAnimation} is `true`.\n   *\n   * @type {Function}\n   * @public\n   */\n  onShow: _propTypes[\"default\"].func,\n\n  /**\n   * Controls the visibility of the Popup.\n   *\n   * By default, the Popup and its contents are not rendered until `open`.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  open: _propTypes[\"default\"].bool,\n\n  /**\n   * Scrim type.\n   *\n   * * Values: `'transparent'`, `'translucent'`, or `'none'`.\n   *\n   * `'none'` is not compatible with `spotlightRestrict` of `'self-only'`, use a transparent scrim\n   * to prevent mouse focus when using popup.\n   *\n   * @type {String}\n   * @default 'translucent'\n   * @public\n   */\n  scrimType: _propTypes[\"default\"].oneOf(['transparent', 'translucent', 'none']),\n\n  /**\n   * Shows a close button.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  showCloseButton: _propTypes[\"default\"].bool,\n\n  /**\n   * Restricts or prioritizes navigation when focus attempts to leave the popup.\n   *\n   * * Values: `'self-first'`, or `'self-only'`.\n   *\n   * Note: If `onClose` is not set, then this has no effect on 5-way navigation. If the popup\n   * has no spottable children, 5-way navigation will cause the Popup to fire `onClose`.\n   *\n   * @type {String}\n   * @default 'self-only'\n   * @public\n   */\n  spotlightRestrict: _propTypes[\"default\"].oneOf(['self-first', 'self-only'])\n};\nPopup.defaultProps = {\n  noAnimation: false,\n  noAutoDismiss: false,\n  open: false,\n  scrimType: 'translucent',\n  showCloseButton: false,\n  spotlightRestrict: 'self-only'\n};\nvar _default = Popup;\nexports[\"default\"] = _default;","import EnactButton, { ButtonProps } from '@enact/moonstone/Button';\nimport styled from 'styled-components';\n\nimport Icon from 'components/icon';\n\nconst StyledButton = styled(EnactButton)`\n  color: inherit;\n  text-decoration: none;\n`;\n\nconst ButtonInner = styled.div<{ iconOnly?: boolean }>`\n  display: flex;\n  align-items: center;\n  color: inherit;\n  text-decoration: none;\n\n  ${Icon} {\n    margin-right: ${(props) => !props.iconOnly && '0.5rem'};\n  }\n`;\n\ntype Props = {\n  icon?: string;\n  iconOnly?: boolean;\n  onClick?: React.MouseEventHandler;\n} & ButtonProps;\n\nconst Button: React.FC<Props> = ({ icon, iconOnly, children, ...props }) => {\n  return (\n    <StyledButton {...props}>\n      <ButtonInner iconOnly={iconOnly}>\n        {icon && <Icon name={icon} />}\n        {!iconOnly && children}\n      </ButtonInner>\n    </StyledButton>\n  );\n};\n\nexport default Button;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"Popup_popup__2HsFP\",\"body\":\"Popup_body__3BCU3\",\"closeContainer\":\"Popup_closeContainer__3sD4a\",\"closeButton\":\"Popup_closeButton__1fhLb\",\"reserveClose\":\"Popup_reserveClose__22HYl\",\"popupTransitionContainer\":\"Popup_popupTransitionContainer__3gLdv\"};","import { ItemDetails, Season, Video } from 'api';\n\nexport function getItemTitle(item?: ItemDetails, video?: Video, season?: Season) {\n  return season ? `${item?.title} (s${season.number}e${video?.number || 1})` : item?.title!;\n}\n","var createFind = require('./_createFind'),\n    findIndex = require('./findIndex');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nmodule.exports = find;\n","var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n","import { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport ExpandableItem from '@enact/moonstone/ExpandableItem';\nimport GridListImageItem from '@enact/moonstone/GridListImageItem';\nimport map from 'lodash/map';\nimport styled, { css } from 'styled-components';\n\nimport { Item, Season, Video, WatchingStatus } from 'api';\nimport { PATHS, generatePath } from 'routes';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst EpisodeItem = styled(GridListImageItem)<{ watched?: boolean }>`\n  width: 9rem;\n  height: 15rem !important;\n\n  [role='img'] {\n    position: relative;\n    ${(props) =>\n      props.watched &&\n      css`\n        :before {\n          content: 'Просмотрено';\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          padding-left: 1rem;\n          padding-top: 5rem;\n          background: rgba(0, 0, 0, 0.5);\n        }\n      `}\n  }\n`;\n\ntype Props = {\n  item: Item;\n  season: Season;\n};\n\nconst SeasonItem: React.FC<Props> = ({ item, season }) => {\n  const history = useHistory();\n  const handleEpisodeClick = useCallback(\n    (episode: Video) => () => {\n      if (episode?.id) {\n        history.push(\n          generatePath(PATHS.Video, {\n            videoId: episode.id,\n          }),\n          {\n            item,\n            video: episode,\n            season,\n          },\n        );\n      }\n    },\n    [item, season, history],\n  );\n\n  return (\n    <Wrapper>\n      <ExpandableItem title={`Сезон ${season.number}`}>\n        {map(season.episodes, (episode) => (\n          <EpisodeItem\n            key={episode.id}\n            source={episode.thumbnail}\n            caption={`Эпизод ${episode.number}`}\n            onClick={handleEpisodeClick(episode)}\n            watched={episode.watched === WatchingStatus.Watched}\n          />\n        ))}\n      </ExpandableItem>\n    </Wrapper>\n  );\n};\n\nexport default SeasonItem;\n","import map from 'lodash/map';\nimport styled from 'styled-components';\n\nimport { Item, Season } from 'api';\nimport SeasonItem from 'components/seasonItem';\nimport Text from 'components/text';\n\nconst Wrapper = styled.div`\n  padding: 2rem;\n`;\n\ntype Props = {\n  item: Item;\n  seasons?: Season[];\n};\n\nconst SeasonsList: React.FC<Props> = ({ item, seasons }) => {\n  if (!seasons?.length) {\n    return null;\n  }\n\n  return (\n    <Wrapper>\n      <Text>Список сезонов</Text>\n      {map(seasons, (season) => (\n        <SeasonItem key={season.id} item={item} season={season} />\n      ))}\n    </Wrapper>\n  );\n};\n\nexport default SeasonsList;\n","import React, { useCallback, useMemo } from 'react';\nimport CheckboxItem from '@enact/moonstone/CheckboxItem';\nimport map from 'lodash/map';\nimport styled from 'styled-components';\n\nimport { Bookmark } from 'api';\nimport useApi from 'hooks/useApi';\nimport useApiMutation from 'hooks/useApiMutation';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst BookmarkItem = styled.div`\n  flex-basis: 20%;\n  padding: 1rem;\n`;\n\ntype Props = {\n  itemId: string;\n};\n\nconst Bookmarks: React.FC<Props> = ({ itemId }) => {\n  const { data } = useApi('bookmarks');\n  const { data: itemBookmarks, dataUpdatedAt, refetch } = useApi('itemBookmarks', [itemId]);\n  const { bookmarkToggleItemAsync } = useApiMutation('bookmarkToggleItem');\n  const bookmarksIds = useMemo(() => itemBookmarks?.folders.map((bookmark) => bookmark.id) || [], [itemBookmarks?.folders]);\n\n  const handleCheckboxToggle = useCallback(\n    (bookmark: Bookmark) => async () => {\n      await bookmarkToggleItemAsync([itemId, bookmark.id]);\n      refetch();\n    },\n    [itemId, bookmarkToggleItemAsync, refetch],\n  );\n\n  return (\n    <Wrapper key={dataUpdatedAt}>\n      {map(data?.items, (bookmark) => (\n        <BookmarkItem key={bookmark.updated}>\n          <CheckboxItem defaultSelected={bookmarksIds.includes(bookmark.id)} onToggle={handleCheckboxToggle(bookmark)}>\n            {bookmark.title}\n          </CheckboxItem>\n        </BookmarkItem>\n      ))}\n    </Wrapper>\n  );\n};\n\nexport default Bookmarks;\n","import { useEffect, useMemo } from 'react';\nimport find from 'lodash/find';\n\nimport { Bool } from 'api';\n\nimport useApi from './useApi';\nimport useStorageState from './useStorageState';\n\nfunction useStreamingTypeEffect() {\n  const { data: streamingTypes } = useApi('streamingTypes');\n  const { data: deviceInfo } = useApi('deviceInfo');\n  const [, setStreamingType] = useStorageState<string>('streaming_type');\n\n  const selectedStreamingType = useMemo(\n    () => find(deviceInfo?.device.settings.streamingType.value, ({ selected }) => selected === Bool.True),\n    [deviceInfo?.device],\n  );\n  const streamingType = useMemo(() => find(streamingTypes?.items, (streamingType) => streamingType?.id === selectedStreamingType?.id), [\n    streamingTypes?.items,\n    selectedStreamingType,\n  ]);\n\n  useEffect(() => {\n    if (streamingType?.code) {\n      setStreamingType(streamingType?.code);\n    }\n  }, [setStreamingType, streamingType?.code]);\n}\n\nexport default useStreamingTypeEffect;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport map from 'lodash/map';\nimport styled from 'styled-components';\n\nimport { WatchingStatus } from 'api';\nimport Button from 'components/button';\nimport ItemsList from 'components/itemsList';\nimport Lazy from 'components/lazy';\nimport Popup from 'components/popup';\nimport Scrollable from 'components/scrollable';\nimport SeasonsList from 'components/seasonsList';\nimport Text from 'components/text';\nimport Bookmarks from 'containers/bookmarks';\nimport useApi from 'hooks/useApi';\nimport useApiMutation from 'hooks/useApiMutation';\nimport useStreamingTypeEffect from 'hooks/useStreamingTypeEffect';\nimport { PATHS, RouteParams, generatePath } from 'routes';\n\nimport { getItemTitle } from 'utils/item';\n\nconst Cover = styled.div`\n  position: relative;\n`;\n\nconst Poster = styled.div<{ src: string }>`\n  width: 100vw;\n  min-height: 100vh;\n  background: url(${(props) => props.src});\n  background-size: cover;\n`;\n\nconst Title = styled(Text)`\n  position: absolute;\n  padding: 0 1rem;\n  top: 0;\n`;\n\nconst Actions = styled.div`\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  left: 1rem;\n  right: 1rem;\n  bottom: 5rem;\n`;\n\nconst Description = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 2rem;\n  white-space: pre-wrap;\n`;\n\nconst TrackList = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  height: 35rem;\n\n  p {\n    margin: 0.1rem;\n    font-size: 0.8rem;\n  }\n`;\n\nconst SimilarList = styled.div`\n  padding: 2rem;\n`;\n\nconst SimilarItems: React.FC<{ itemId: string }> = ({ itemId }) => {\n  const { data } = useApi('itemSmiliar', [itemId]);\n\n  if (data && data.items.length > 0) {\n    return (\n      <SimilarList>\n        <Text>Похожие</Text>\n\n        <ItemsList items={data.items} scrollable={false} />\n      </SimilarList>\n    );\n  }\n\n  return null;\n};\n\nconst ItemView: React.FC = () => {\n  const history = useHistory();\n  const { itemId } = useParams<RouteParams>();\n  const [visible, setVisible] = useState(false);\n  const { data, refetch } = useApi('itemMedia', [itemId!], { staleTime: 0 });\n\n  const { watchingToggleWatchlistAsync } = useApiMutation('watchingToggleWatchlist');\n\n  const video = useMemo(\n    () => data?.item.videos?.find(({ watching }) => watching.status !== WatchingStatus.Watched) || data?.item.videos?.[0],\n    [data?.item],\n  );\n  const season = useMemo(\n    () => data?.item.seasons?.find(({ watching }) => watching.status !== WatchingStatus.Watched) || data?.item.seasons?.[0],\n    [data?.item],\n  );\n  const episode = useMemo(\n    () => season?.episodes.find(({ watching }) => watching.status !== WatchingStatus.Watched) || season?.episodes[0],\n    [season],\n  );\n  const trailer = useMemo(() => data?.item.trailer, [data?.item]);\n  const videoToPlay = video || episode;\n  const title = useMemo(() => getItemTitle(data?.item, videoToPlay, season), [data?.item, season, videoToPlay]);\n\n  const handleOnPlayClick = useCallback(() => {\n    if (videoToPlay?.id) {\n      history.push(\n        generatePath(PATHS.Video, {\n          videoId: videoToPlay.id,\n        }),\n        {\n          item: data?.item,\n          video: videoToPlay,\n          season,\n        },\n      );\n    }\n  }, [history, data?.item, season, videoToPlay]);\n\n  const handleOnTrailerClick = useCallback(() => {\n    if (trailer?.id) {\n      history.push(\n        generatePath(PATHS.Trailer, {\n          trailerId: trailer.id,\n        }),\n        {\n          item: data?.item,\n          trailer,\n        },\n      );\n    }\n  }, [history, data?.item, trailer]);\n\n  const handleOnBookmarksClick = useCallback(() => {\n    setVisible(true);\n  }, []);\n\n  const handleOnVisibilityClick = useCallback(async () => {\n    await watchingToggleWatchlistAsync([itemId!]);\n    refetch();\n  }, [itemId, watchingToggleWatchlistAsync, refetch]);\n\n  useStreamingTypeEffect();\n\n  return (\n    <Scrollable>\n      <Cover>\n        <Poster src={(data?.item?.posters.wide || data?.item?.posters.big)!} />\n        <Title>{title}</Title>\n        <Actions>\n          <div>\n            <Button icon=\"play_circle_outline\" onClick={handleOnPlayClick}>\n              Смотреть\n            </Button>\n\n            <Button icon=\"bookmark\" onClick={handleOnBookmarksClick}>\n              В закладки\n            </Button>\n\n            <Popup visible={visible} onVisibilityChange={setVisible}>\n              <Bookmarks key={`${itemId}-${visible}`} itemId={itemId!} />\n            </Popup>\n\n            {typeof data?.item.subscribed === 'boolean' && (\n              <Button icon={data?.item.subscribed ? 'visibility_off' : 'visibility'} onClick={handleOnVisibilityClick}>\n                {data?.item.subscribed ? 'Не буду смотреть' : 'Буду смотреть'}\n              </Button>\n            )}\n          </div>\n\n          <div>\n            {trailer && (\n              <Button icon=\"videocam\" onClick={handleOnTrailerClick}>\n                Трейлер\n              </Button>\n            )}\n          </div>\n        </Actions>\n      </Cover>\n\n      <SeasonsList item={data?.item!} seasons={data?.item?.seasons} />\n\n      <Description>\n        <Text>{data?.item.plot}</Text>\n\n        {!!data?.item.tracklist?.length && (\n          <>\n            <Text>Треклист</Text>\n            <TrackList>\n              {map(data?.item.tracklist, (track, idx) => (\n                <Text key={idx}>\n                  {idx + 1}. {track.title}\n                </Text>\n              ))}\n            </TrackList>\n          </>\n        )}\n      </Description>\n\n      <Lazy height=\"50rem\">\n        <SimilarItems itemId={itemId!} />\n      </Lazy>\n    </Scrollable>\n  );\n};\n\nexport default ItemView;\n"],"sourceRoot":""}