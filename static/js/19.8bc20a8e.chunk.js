(this["webpackJsonpkinopub.webos"]=this["webpackJsonpkinopub.webos"]||[]).push([[19],{520:function(e,n,t){"use strict";t.d(n,"b",(function(){return m})),t.d(n,"a",(function(){return g}));var c=t(6),r=t(32),u=t(20),o=t(0),i=t(529),a=t.n(i),l=t(21),s=t(47),b=t(38),j=function(e,n,t){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{disconnectOnLeave:!1},r=n.onEnterViewport,u=n.onLeaveViewport,i=Object(o.useState)(),a=Object(s.a)(i,2),l=a[1],j=Object(o.useRef)(null),d=Object(o.useRef)(!1),O=Object(o.useRef)(!1),f=Object(o.useRef)(0),v=Object(o.useRef)(0),h=Object(o.useCallback)((function(){if(e.current&&j.current){var n=Object(b.findDOMNode)(e.current);n&&j.current.observe(n)}}),[e,j]),p=Object(o.useCallback)((function(){if(e.current&&j.current){var n=Object(b.findDOMNode)(e.current);n&&(j.current.unobserve(n),j.current.disconnect(),j.current=null)}}),[e,j]),g=Object(o.useCallback)((function(e){var n=e[0]||{},t=n.isIntersecting,o=n.intersectionRatio,i="undefined"!==typeof t?t:o>0;if(!O.current&&i)return O.current=!0,null===r||void 0===r||r(),f.current+=1,d.current=i,void l(i);O.current&&!i&&(O.current=!1,null===u||void 0===u||u(),c.disconnectOnLeave&&j.current&&j.current.disconnect(),v.current+=1,d.current=i,l(i))}),[j,c.disconnectOnLeave,r,u]),m=Object(o.useCallback)((function(){j.current||(j.current=new IntersectionObserver(g,t))}),[j,t,g]);return Object(o.useEffect)((function(){return m(),h(),function(){p()}}),[m,h,p]),{inViewport:d.current,enterCount:f.current,leaveCount:v.current}},d=t(729);var O,f=function(e){var n=Object(d.a)();return Object(o.useMemo)((function(){return"".concat(e,"-").concat(n)}),[e,n])},v=t(1),h=["children","onScrollToEnd"],p=l.b.div(O||(O=Object(u.a)(["\n  height: 5rem;\n"]))),g=Object(o.createContext)({}),m=function(e){var n=e.children,t=e.onScrollToEnd,u=Object(r.a)(e,h),i=Object(o.useRef)(null),l=f("scrollable"),s=Object(o.useMemo)((function(){return{id:l}}),[l]);return j(i,{onEnterViewport:t}),Object(v.jsxs)(a.a,Object(c.a)(Object(c.a)({id:l,direction:"vertical",verticalScrollbar:"hidden",horizontalScrollbar:"hidden"},u),{},{children:[Object(v.jsx)(g.Provider,{value:s,children:n}),Object(v.jsx)(p,{ref:i})]}))}},522:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var c=t(6),r=t(0),u=t(530),o=t.n(u),i=t(520),a=t(1),l=function(e){var n=Object(r.useContext)(i.a).id;return Object(a.jsx)(o.a,Object(c.a)({once:!0,offset:100,scrollContainer:n&&"#".concat(n)},e))};var s=l},541:function(e,n,t){"use strict";var c=t(47),r=t(0),u=t(527),o=t.n(u),i=t(554),a=t.n(i),l=t(531),s=t.n(l);n.a=function(e,n){var t=e.data,u=e.isLoading,i=e.isFetchingNextPage,l=e.fetchNextPage,b=Object(r.useState)(!1),j=Object(c.a)(b,2),d=j[0],O=j[1],f=Object(r.useMemo)((function(){return s()(o()(a()(null===t||void 0===t?void 0:t.pages,(function(e){return e.items}))),"id")}),[null===t||void 0===t?void 0:t.pages]),v=Object(r.useMemo)((function(){return n?n(f):f}),[f,n]),h=Object(r.useCallback)((function(){d&&(l(),O(!1))}),[d,l]);return Object(r.useEffect)((function(){O(!0)}),[f.length]),[v,u||i,h]}},549:function(e,n,t){"use strict";var c=t(6),r=t(54),u=t(0),o=t(609),i=t(142);n.a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,a=Object(u.useMemo)((function(){return new i.c}),[]),l=Object(o.a)([e].concat(Object(r.a)(n)),(function(t){var c=t.pageParam;return a[e].apply(a,Object(r.a)(n).concat([c]))}),Object(c.a)({getNextPageParam:function(e){var n;return(null===e||void 0===e||null===(n=e.pagination)||void 0===n?void 0:n.current)+1||1}},t));return l}},588:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var c,r=t(6),u=t(32),o=t(20),i=t(0),a=t(605),l=t.n(a),s=t(21),b=t(1),j=["autoFocus"],d=s.b.div(c||(c=Object(o.a)(["\n  display: inline-flex;\n\n  > div {\n    width: 100%;\n  }\n"]))),O=function(e){var n=e.autoFocus,t=Object(u.a)(e,j),c=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e;return n&&(e=requestAnimationFrame((function(){var e,n;null===(e=c.current)||void 0===e||null===(n=e.querySelector("input"))||void 0===n||n.focus()}))),function(){e&&cancelAnimationFrame(e)}}),[c,n]),Object(b.jsx)(d,{ref:c,children:Object(b.jsx)(l.a,Object(r.a)({},t))})}},725:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return M}));var c,r,u,o=t(47),i=t(20),a=t(0),l=t(21),s=t(588),b=t(54),j=t(102),d=t.n(j),O=t(517),f=t(528),v=t.n(f),h=t(522),p=t(5),g=t(1),m=Object(l.b)(h.a)(c||(c=Object(i.a)(["\n  display: inline-flex;\n  position: relative;\n  height: 20rem !important;\n  width: 20%;\n"]))),x=Object(l.b)(v.a)(r||(r=Object(i.a)(["\n  width: 100%;\n"]))),w=function(e){var n=e.collection,t=Object(O.e)(),c=Object(a.useCallback)((function(){(null===n||void 0===n?void 0:n.id)&&t.push(Object(p.b)(p.a.Collection,{collectionId:n.id}))}),[null===n||void 0===n?void 0:n.id,t]);return Object(g.jsx)(m,{height:"20rem",children:Object(g.jsx)(x,{source:null===n||void 0===n?void 0:n.posters.medium,caption:null===n||void 0===n?void 0:n.title,onClick:c})})},C=t(520),k=function(e){var n=e.collections,t=e.loading,c=e.onScrollToEnd;return Object(g.jsxs)(C.b,{onScrollToEnd:c,children:[d()(n,(function(e){return Object(g.jsx)(w,{collection:e},e.id)})),t&&d()(Object(b.a)(new Array(15)),(function(e,n){return Object(g.jsx)(w,{},n)}))]})},S=t(541),E=function(e){var n=e.queryResult,t=e.processItems,c=Object(S.a)(n,t),r=Object(o.a)(c,3),u=r[0],i=r[1],a=r[2];return Object(g.jsx)(k,{collections:u,loading:i,onScrollToEnd:a})},R=t(549),y=Object(l.b)(s.a)(u||(u=Object(i.a)(["\n  margin-bottom: 1rem;\n"]))),M=function(){var e=Object(a.useState)(""),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(R.a)("collections",[t,"watchers-"]),u=Object(a.useCallback)((function(e){var n=e.value;c(n)}),[c]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(y,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0438...",value:t,onChange:u}),Object(g.jsx)(E,{queryResult:r})]})}}}]);
//# sourceMappingURL=19.8bc20a8e.chunk.js.map