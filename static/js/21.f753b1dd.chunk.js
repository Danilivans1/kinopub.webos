(this["webpackJsonpkinopub.webos"]=this["webpackJsonpkinopub.webos"]||[]).push([[21],{1067:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return m}));var n=r(15),i=r(26),s=r.n(i),u=r(44),o=r(75),a=r(1),c=r(881),l=r(234),d=r(942),h=r(889),f=r(176),p=r(252),v=r(941),b=r(929),y=r(2),O=function(t,e,r){var n=function(t,e,r){return Object(a.useMemo)((function(){var n,i,s=null===(n=t.videos||(null===e||void 0===e?void 0:e.episodes))||void 0===n?void 0:n.find((function(t){return t.number===r.number+1}));if(s)return s;var u=null===(i=t.seasons)||void 0===i?void 0:i.find((function(t){return t.number===e.number+1}));return u?u.episodes[0]:void 0}),[t,e,r])}(t,e,r);return[function(t,e,r){return Object(a.useMemo)((function(){var n,i,s=null===(n=t.videos||(null===e||void 0===e?void 0:e.episodes))||void 0===n?void 0:n.find((function(t){return t.number===r.number-1}));if(s)return s;var u=null===(i=t.seasons)||void 0===i?void 0:i.find((function(t){return t.number===e.number-1}));return u?u.episodes[u.episodes.length-1]:void 0}),[t,e,r])}(t,e,r),n]},m=function(){var t=Object(c.e)(),e=Object(c.f)(),r=Object(f.a)("watchingMarkTime").watchingMarkTimeAsync,i=Object(p.a)("streaming_type"),m=Object(o.a)(i,1)[0],R=e.state,j=R.item,S=R.video,g=R.season,Q=Object(a.useState)(S),w=Object(o.a)(Q,2),E=w[0],k=w[1],C=O(j,g,E),T=Object(o.a)(C,2),I=T[0],F=T[1],U=Object(h.a)("itemMediaLinks",[E.id]),x=Object(a.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(e,n){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.number,t.next=3,r([j.id,n,i,null===g||void 0===g?void 0:g.number]);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r,j,g]),P=Object(a.useMemo)((function(){return(null===U||void 0===U?void 0:U.data)?{title:Object(v.a)(j,E,g),description:E.title,poster:j.posters.wide||j.posters.big,audios:Object(b.a)(E.audios),sources:Object(b.b)(U.data.files,m),subtitles:Object(b.c)(U.data.subtitles),startTime:E.watching.status===l.b.Watching?E.watching.time:0}:null}),[j,g,E,null===U||void 0===U?void 0:U.data,m]),M=Object(a.useCallback)((function(t){x(E,t)}),[x,E]),A=Object(a.useCallback)((function(e){x(E,e),F?k(F):t.goBack()}),[x,t,E,F]),D=Object(a.useCallback)((function(t){var e=t.currentTime;x(E,e),I&&k(I)}),[x,E,I]),L=Object(a.useCallback)((function(t){var e=t.currentTime;x(E,e),F&&k(F)}),[x,E,F]),B=Object(a.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(E,e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[x,E]);return Object(y.jsx)(y.Fragment,{children:P&&Object(y.jsx)(d.a,Object(n.a)(Object(n.a)({},P),{},{onPause:M,onEnded:A,onJumpBackward:D,onJumpForward:L,onTimeSync:B}),E.id)})}},889:function(t,e,r){"use strict";var n=r(90),i=r(1),s=r(897),u=r(234);e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=Object(i.useMemo)((function(){return new u.c}),[]),a=Object(s.a)([t].concat(Object(n.a)(e)),(function(){return o[t].apply(o,Object(n.a)(e))}),r);return a}},890:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(1),i=r.n(n),s=r(20);function u(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var o=i.a.createContext(u()),a=r(235);function c(t,e){var r=i.a.useRef(!1),n=i.a.useState(0)[1],u=Object(a.b)(),c=i.a.useContext(o),l=u.defaultQueryObserverOptions(t);l.optimisticResults=!0,l.onError&&(l.onError=s.a.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=s.a.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=s.a.batchCalls(l.onSettled)),l.suspense&&"number"!==typeof l.staleTime&&(l.staleTime=1e3),(l.suspense||l.useErrorBoundary)&&(c.isReset()||(l.retryOnMount=!1));var d=i.a.useState((function(){return new e(u,l)}))[0],h=d.getOptimisticResult(l);if(i.a.useEffect((function(){r.current=!0,c.clearReset();var t=d.subscribe(s.a.batchCalls((function(){r.current&&n((function(t){return t+1}))})));return d.updateResult(),function(){r.current=!1,t()}}),[c,d]),i.a.useEffect((function(){d.setOptions(l,{listeners:!1})}),[l,d]),l.suspense&&h.isLoading)throw d.fetchOptimistic(l).then((function(t){var e=t.data;null==l.onSuccess||l.onSuccess(e),null==l.onSettled||l.onSettled(e,null)})).catch((function(t){c.clearReset(),null==l.onError||l.onError(t),null==l.onSettled||l.onSettled(void 0,t)}));if((l.suspense||l.useErrorBoundary)&&h.isError&&!h.isFetching)throw h.error;return"tracked"===l.notifyOnChangeProps&&(h=d.trackResult(h)),h}},892:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var n=r(5),i=r(29),s=r(4),u=r(20),o=r(91),a=r(55),c=r(131),l=r(57),d=function(t){function e(e,r){var n;return(n=t.call(this)||this).client=e,n.options=r,n.trackedProps=[],n.previousSelectError=null,n.bindMethods(),n.setOptions(r),n}Object(i.a)(e,t);var r=e.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),h(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return t=this.currentQuery,!1!==(e=this.options).enabled&&("always"===e.refetchOnReconnect||!1!==e.refetchOnReconnect&&p(t,e));var t,e},r.shouldFetchOnWindowFocus=function(){return t=this.currentQuery,!1!==(e=this.options).enabled&&("always"===e.refetchOnWindowFocus||!1!==e.refetchOnWindowFocus&&p(t,e));var t,e},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(t,e){var r=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(t),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();var i=this.hasListeners();i&&f(this.currentQuery,n,this.options,r)&&this.executeFetch(),this.updateResult(e),!i||this.currentQuery===n&&this.options.enabled===r.enabled&&this.options.staleTime===r.staleTime||this.updateStaleTimeout(),!i||this.currentQuery===n&&this.options.enabled===r.enabled&&this.options.refetchInterval===r.refetchInterval||this.updateRefetchInterval()},r.getOptimisticResult=function(t){var e=this.client.defaultQueryObserverOptions(t),r=this.client.getQueryCache().build(this.client,e);return this.createResult(r,e)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(t){var e=this,r={};return Object.keys(t).forEach((function(n){Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:function(){var r=n;return e.trackedProps.includes(r)||e.trackedProps.push(r),t[r]}})})),r},r.getNextResult=function(t){var e=this;return new Promise((function(r,n){var i=e.subscribe((function(e){e.isFetching||(i(),e.isError&&(null==t?void 0:t.throwOnError)?n(e.error):r(e))}))}))},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(t){return this.fetch(t)},r.fetchOptimistic=function(t){var e=this,r=this.client.defaultQueryObserverOptions(t),n=this.client.getQueryCache().build(this.client,r);return n.fetch().then((function(){return e.createResult(n,r)}))},r.fetch=function(t){var e=this;return this.executeFetch(t).then((function(){return e.updateResult(),e.currentResult}))},r.executeFetch=function(t){this.updateQuery();var e=this.currentQuery.fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(e=e.catch(s.i)),e},r.updateStaleTimeout=function(){var t=this;if(this.clearStaleTimeout(),!s.e&&!this.currentResult.isStale&&Object(s.f)(this.options.staleTime)){var e=Object(s.r)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){t.currentResult.isStale||t.updateResult()}),e)}},r.updateRefetchInterval=function(){var t=this;this.clearRefetchInterval(),!s.e&&!1!==this.options.enabled&&Object(s.f)(this.options.refetchInterval)&&(this.refetchIntervalId=setInterval((function(){(t.options.refetchIntervalInBackground||o.a.isFocused())&&t.executeFetch()}),this.options.refetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval()},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0},r.clearRefetchInterval=function(){clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0},r.createResult=function(t,e){var r,n=this.currentQuery,i=this.options,u=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,l=t!==n,d=l?t.state:this.currentQueryInitialState,v=l?this.currentResult:this.previousQueryResult,b=t.state,y=b.dataUpdatedAt,O=b.error,m=b.errorUpdatedAt,R=b.isFetching,j=b.status,S=!1,g=!1;if(e.optimisticResults){var Q=this.hasListeners(),w=!Q&&h(t,e),E=Q&&f(t,n,e,i);(w||E)&&(R=!0,y||(j="loading"))}if(e.keepPreviousData&&!b.dataUpdateCount&&(null==v?void 0:v.isSuccess)&&"error"!==j)r=v.data,y=v.dataUpdatedAt,j=v.status,S=!0;else if(e.select&&"undefined"!==typeof b.data)if(u&&b.data===(null==o?void 0:o.data)&&e.select===(null==a?void 0:a.select)&&!this.previousSelectError)r=u.data;else try{r=e.select(b.data),!1!==e.structuralSharing&&(r=Object(s.n)(null==u?void 0:u.data,r)),this.previousSelectError=null}catch(C){Object(c.a)().error(C),O=C,this.previousSelectError=C,m=Date.now(),j="error"}else r=b.data;if("undefined"!==typeof e.placeholderData&&"undefined"===typeof r&&"loading"===j){var k;if((null==u?void 0:u.isPlaceholderData)&&e.placeholderData===(null==a?void 0:a.placeholderData))k=u.data;else if(k="function"===typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&"undefined"!==typeof k)try{k=e.select(k),!1!==e.structuralSharing&&(k=Object(s.n)(null==u?void 0:u.data,k)),this.previousSelectError=null}catch(C){Object(c.a)().error(C),O=C,this.previousSelectError=C,m=Date.now(),j="error"}"undefined"!==typeof k&&(j="success",r=k,g=!0)}return{status:j,isLoading:"loading"===j,isSuccess:"success"===j,isError:"error"===j,isIdle:"idle"===j,data:r,dataUpdatedAt:y,error:O,errorUpdatedAt:m,failureCount:b.fetchFailureCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>d.dataUpdateCount||b.errorUpdateCount>d.errorUpdateCount,isFetching:R,isLoadingError:"error"===j&&0===b.dataUpdatedAt,isPlaceholderData:g,isPreviousData:S,isRefetchError:"error"===j&&0!==b.dataUpdatedAt,isStale:p(t,e),refetch:this.refetch,remove:this.remove}},r.shouldNotifyListeners=function(t,e){if(!e)return!0;if(t===e)return!1;var r=this.options,n=r.notifyOnChangeProps,i=r.notifyOnChangePropsExclusions;if(!n&&!i)return!0;if("tracked"===n&&!this.trackedProps.length)return!0;var s="tracked"===n?this.trackedProps:n;return Object.keys(t).some((function(r){var n=r,u=t[n]!==e[n],o=null==s?void 0:s.some((function(t){return t===r})),a=null==i?void 0:i.some((function(t){return t===r}));return u&&!a&&(!s||o)}))},r.updateResult=function(t){var e=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Object(s.p)(this.currentResult,e)){var r={cache:!0};!1!==(null==t?void 0:t.listeners)&&this.shouldNotifyListeners(this.currentResult,e)&&(r.listeners=!0),this.notify(Object(n.a)({},r,t))}},r.updateQuery=function(){var t=this.client.getQueryCache().build(this.client,this.options);if(t!==this.currentQuery){var e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}},r.onQueryUpdate=function(t){var e={};"success"===t.type?e.onSuccess=!0:"error"!==t.type||Object(l.c)(t.error)||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()},r.notify=function(t){var e=this;u.a.batch((function(){t.onSuccess?(null==e.options.onSuccess||e.options.onSuccess(e.currentResult.data),null==e.options.onSettled||e.options.onSettled(e.currentResult.data,null)):t.onError&&(null==e.options.onError||e.options.onError(e.currentResult.error),null==e.options.onSettled||e.options.onSettled(void 0,e.currentResult.error)),t.listeners&&e.listeners.forEach((function(t){t(e.currentResult)})),t.cache&&e.client.getQueryCache().notify({query:e.currentQuery,type:"observerResultsUpdated"})}))},e}(a.a);function h(t,e){return function(t,e){return!1!==e.enabled&&!t.state.dataUpdatedAt&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||function(t,e){return!1!==e.enabled&&t.state.dataUpdatedAt>0&&("always"===e.refetchOnMount||!1!==e.refetchOnMount&&p(t,e))}(t,e)}function f(t,e,r,n){return!1!==r.enabled&&(t!==e||!1===n.enabled)&&p(t,r)}function p(t,e){return t.isStaleByTime(e.staleTime)}},897:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n=r(892),i=r(4),s=r(890);function u(t,e,r){var u=Object(i.l)(t,e,r);return Object(s.a)(u,n.a)}},941:function(t,e,r){"use strict";function n(t,e,r){return r?"".concat(null===t||void 0===t?void 0:t.title," (s").concat(r.number,"e").concat((null===e||void 0===e?void 0:e.number)||1,")"):null===t||void 0===t?void 0:t.title}r.d(e,"a",(function(){return n}))}}]);
//# sourceMappingURL=21.f753b1dd.chunk.js.map