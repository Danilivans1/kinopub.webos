(this["webpackJsonpkinopub.webos"]=this["webpackJsonpkinopub.webos"]||[]).push([[28],{1054:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return w}));var c=t(73),r=t(2),a=t(956),u=t(888),o=t(105),i=t(193),l=t.n(i),s=t(31),b=t(52),j=t.n(b),d=t(891),f=t(7),O=t(3),v=function(e){var n=e.collection,t=e.className,c=Object(s.h)(),a=Object(r.useCallback)((function(){(null===n||void 0===n?void 0:n.id)&&c.push(Object(f.b)(f.a.Collection,{collectionId:n.id}),{collection:n,title:n.title})}),[n,c]);return Object(O.jsx)(d.a,{onClick:a,source:null===n||void 0===n?void 0:n.posters.medium,caption:null===n||void 0===n?void 0:n.title,className:j()("h-72",t)})},m=t(890),h=t(252),p=function(e){var n=e.title,t=e.collections,c=e.loading,r=e.onScrollToEnd,a=e.scrollable,u=void 0===a||a,i=Object(O.jsxs)("div",{children:[n&&Object(O.jsx)(h.a,{className:"m-1 mb-3",children:n}),Object(O.jsxs)("div",{className:"flex flex-wrap pr-2",children:[l()(t,(function(e){return Object(O.jsx)(v,{collection:e},e.id)})),c&&l()(Object(o.a)(new Array(15)),(function(e,n){return Object(O.jsx)(v,{},n)}))]})]});return u?Object(O.jsx)(m.a,{onScrollToEnd:r,children:i}):i},x=t(901),g=function(e){var n=e.queryResult,t=e.processItems,r=Object(x.a)(n,t),a=Object(c.a)(r,3),u=a[0],o=a[1],i=a[2];return Object(O.jsx)(p,{collections:u,loading:o,onScrollToEnd:i})},N=t(903),w=function(){var e=Object(r.useState)(""),n=Object(c.a)(e,2),t=n[0],o=n[1],i=Object(N.a)("collections",[t,"watchers-"]),l=Object(r.useCallback)((function(e){o(e)}),[o]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(u.a,{title:"\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0438"}),Object(O.jsx)("div",{className:"m-1 mb-3 mr-2",children:Object(O.jsx)(a.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0438...",value:t,onChange:l})}),Object(O.jsx)(g,{queryResult:i})]})}},888:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var c=t(11),r=t(893),a=t(3),u=function(e){return Object(a.jsx)(r.a,Object(c.a)({defaultTitle:"Unknown",titleTemplate:"%s | Kinopub WebOS"},e))}},890:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var c=t(11),r=t(57),a=t(2),u=t(52),o=t.n(u),i=t(73),l=t(106),s=function(e,n,t){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{disconnectOnLeave:!1},r=n.onEnterViewport,u=n.onLeaveViewport,o=Object(a.useState)(),s=Object(i.a)(o,2),b=s[1],j=Object(a.useRef)(null),d=Object(a.useRef)(!1),f=Object(a.useRef)(!1),O=Object(a.useRef)(0),v=Object(a.useRef)(0),m=Object(a.useCallback)((function(){if(e.current&&j.current){var n=Object(l.findDOMNode)(e.current);n&&j.current.observe(n)}}),[e,j]),h=Object(a.useCallback)((function(){if(e.current&&j.current){var n=Object(l.findDOMNode)(e.current);n&&(j.current.unobserve(n),j.current.disconnect(),j.current=null)}}),[e,j]),p=Object(a.useCallback)((function(e){var n=e[0]||{},t=n.isIntersecting,a=n.intersectionRatio,o="undefined"!==typeof t?t:a>0;if(!f.current&&o)return f.current=!0,null===r||void 0===r||r(),O.current+=1,d.current=o,void b(o);f.current&&!o&&(f.current=!1,null===u||void 0===u||u(),c.disconnectOnLeave&&j.current&&j.current.disconnect(),v.current+=1,d.current=o,b(o))}),[j,c.disconnectOnLeave,r,u]),x=Object(a.useCallback)((function(){j.current||(j.current=new IntersectionObserver(p,t))}),[j,t,p]);return Object(a.useEffect)((function(){return x(),m(),function(){h()}}),[x,m,h]),{inViewport:d.current,enterCount:O.current,leaveCount:v.current}},b=t(3),j=["children","className","onScrollToEnd"],d=function(e){var n=e.children,t=e.className,u=e.onScrollToEnd,i=Object(r.a)(e,j),l=Object(a.useRef)(null);return s(l,{onEnterViewport:u}),Object(b.jsxs)("div",Object(c.a)(Object(c.a)({className:o()("overflow-y-auto h-full",t)},i),{},{children:[n,Object(b.jsx)("div",{className:"h-40",ref:l})]}))}},891:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var c=t(11),r=t(57),a=t(52),u=t.n(a),o=t(251),i=t(3),l=["className","wrapperClassName","source","caption","children"],s=function(e){var n=e.className,t=e.wrapperClassName,a=e.source,s=e.caption,b=e.children,j=Object(r.a)(e,l);return Object(i.jsx)(o.a,Object(c.a)(Object(c.a)({},j),{},{className:u()("rounded-xl w-1/5",t),children:Object(i.jsxs)("div",{className:u()("h-40 m-1 flex flex-col relative overflow-hidden cursor-pointer",n),children:[Object(i.jsx)("img",{loading:"lazy",className:"w-full h-full object-cover rounded-xl border-2 border-gray-300 bg-gray-300",src:a,alt:s}),Object(i.jsx)("div",{className:"px-2",children:Object(i.jsx)("p",{className:"text-gray-200 text-sm text-center overflow-hidden whitespace-nowrap",children:s})}),b]})}))}},901:function(e,n,t){"use strict";var c=t(73),r=t(2),a=t(897),u=t.n(a),o=t(905),i=t.n(o),l=t(898),s=t.n(l);n.a=function(e,n){var t=e.data,a=e.isLoading,o=e.isFetchingNextPage,l=e.fetchNextPage,b=Object(r.useState)(!1),j=Object(c.a)(b,2),d=j[0],f=j[1],O=Object(r.useMemo)((function(){return s()(u()(i()(null===t||void 0===t?void 0:t.pages,(function(e){return e.items}))),"id")}),[null===t||void 0===t?void 0:t.pages]),v=Object(r.useMemo)((function(){return n?n(O):O}),[O,n]),m=Object(r.useCallback)((function(){d&&(l(),f(!1))}),[d,l]);return Object(r.useEffect)((function(){f(!0)}),[O.length]),[v,a||o,m]}},903:function(e,n,t){"use strict";var c=t(11),r=t(105),a=t(2),u=t(955),o=t(253);n.a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,i=Object(a.useMemo)((function(){return new o.c}),[]),l=Object(u.a)([e].concat(Object(r.a)(n)),(function(t){var c=t.pageParam;return i[e].apply(i,Object(r.a)(n).concat([c]))}),Object(c.a)({getNextPageParam:function(e){var n;return(null===e||void 0===e||null===(n=e.pagination)||void 0===n?void 0:n.current)+1||1}},t));return l}},956:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var c=t(11),r=t(57),a=t(2),u=t(106),o=t(975),i=t.n(o),l=t(52),s=t.n(l),b=t(3),j=["className","onChange","autoFocus"],d=function(e){var n=e.className,t=e.onChange,o=e.autoFocus,l=Object(r.a)(e,j),d=Object(a.useRef)(null),f=Object(a.useCallback)((function(e){var n=e.value;null===t||void 0===t||t(n)}),[t]);return Object(a.useEffect)((function(){var e;return o&&(e=requestAnimationFrame((function(){var e,n=Object(u.findDOMNode)(d.current);null===n||void 0===n||null===(e=n.querySelector("input"))||void 0===e||e.focus()}))),function(){e&&cancelAnimationFrame(e)}}),[d,o]),Object(b.jsx)(i.a,Object(c.a)(Object(c.a)({},l),{},{ref:d,className:s()("w-full",n),onChange:f}))}}}]);
//# sourceMappingURL=28.181df6bb.chunk.js.map