{"version":3,"sources":["hooks/useApiMutation.ts","components/icon/icon.tsx","api/base.ts","api/typings.ts","api/kinopub.ts","api/client.ts","hooks/useBackButtonEffect.ts","utils/keyboard.ts","hooks/useStorageState.ts","../node_modules/ilib/lib sync /^$","components/spinner/spinner.tsx","components/link/link.tsx","storage.ts","routes.ts","attachErrorHandler.ts","layouts/fill/fill.tsx","containers/menu/menu.tsx","layouts/main/main.tsx","components/view/view.tsx","hooks/useDeviceInfo.ts","hooks/useDeviceAuthorizationEffect.ts","containers/views/views.tsx","App/App.tsx","index.tsx"],"names":["useApiMutation","method","client","useMemo","ApiClient","mutation","useMutation","params","Object","assign","mutate","mutateAsync","ICONS_MAP","notifications_active","new_releases","library_music","live_tv","play_arrow","play_circle_outline","sports_soccer","Icon","styled","i","attrs","name","className","props","cx","children","Bool","WatchingStatus","stringifyParams","JSON","stringify","_","value","encodeParam","param","encodeURIComponent","normalizeParams","keys","filter","key","undefined","map","isArray","idx","join","normalizeArrayParams","BaseApiClient","baseUrl","this","url","data","accessToken","getAccessToken","headers","Accept","fetch","body","response","status","clearTokens","json","error","toString","request","Error","access_token","refresh_token","expires_in","KINOPUB_API_BASE_URL","process","KINOPUB_API_CLIENT_ID","KINOPUB_API_CLIENT_SECRET","storage","getItem","setItem","forEach","removeItem","clientId","clientSecret","accessTokenCheckIntervaId","clearInterval","deviceInfo","onSuccess","clearTimers","saveTokens","deviceNotify","code","a","post","grant_type","client_id","client_secret","onConfirm","refreshToken","getRefreshToken","refreshTokens","processTokensReponse","requestDeviceCode","interval","user_code","verification_uri","Promise","resolve","reject","setInterval","requestTokens","deviceUnlink","get","id","settings","page","perpage","nolinks","True","mid","file","type","like","sid","item","title","folder","video","season","subscribed","time","sort","useBackButtonEffect","handler","useEffect","registerBackButtonHandler","KeyboardCodes","BACK_BUTTON_HANDLERS","isBackButton","e","keyCode","Back","isPlayButton","Play","isArrowUpButton","window","addEventListener","h","useStorageState","useState","_setValue","setValue","useCallback","newValue","expire","listener","unsubscribe","subscribe","webpackEmptyContext","req","module","exports","Spinner","centered","StyledLink","Item","LinkInner","div","iconOnly","Link","href","state","icon","onClick","history","useHistory","handleOnClick","push","prefix","parse","localStorage","Date","now","Storage","listeners","l","emit","requestAnimationFrame","PATHS","Index","Home","Search","Watching","Category","Channels","Channel","Bookmarks","Bookmark","Collections","Collection","History","Video","Trailer","Pair","Speed","Settings","generatePath","pattern","search","query","URLSearchParams","baseGeneratePath","ev","stack","length","substring","errorInfo","message","filename","line","lineno","column","colno","FillLayout","Nav","nav","List","ul","ListItem","li","active","menuItems","categoryId","Menu","location","useLocation","list","pathname","Wrapper","Content","MainLayout","rest","View","component","layout","Layout","render","routeProps","fallback","createElement","pkg","require","APP_TITLE","description","APP_INFO","version","useDeviceInfo","software","setSoftware","hardware","setHardware","platform","detect","navigator","platformName","deviceinfo","device","modelName","sdkVersion","useDeviceAuthorizationEffect","deviceAuthorizationAsync","isLogged","handleOnConfirm","userCode","verificationUri","replace","timeoutId","setTimeout","clearTimeout","StyledPanels","Panels","Views","goBack","noCloseButton","BookmarkView","React","lazy","BookmarksView","CategoryView","ChannelView","ChannelsView","CollectionView","CollectionsView","HistoryView","HomeView","IndexView","ItemView","NotFoundView","PairView","SearchView","SettingsView","SpeedView","TrailerView","VideoView","WatchingView","queryClient","QueryClient","defaultOptions","queries","staleTime","MoonstoneDecorator","QueryClientProvider","path","exact","app","document","getElementById"],"mappings":"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","file":"static/js/main.f38e24ec.chunk.js","sourcesContent":["import { useMemo } from 'react';\nimport { useMutation } from 'react-query';\n\nimport ApiClient from 'api';\n\nimport { Method, Methods } from './useApi';\n\nfunction useApiMutation<TMethod extends Method, TData = Methods[TMethod], TError = string, TVariables = Parameters<ApiClient[TMethod]>>(\n  method: TMethod,\n) {\n  const client = useMemo(() => new ApiClient(), []);\n\n  // @ts-expect-error\n  const mutation = useMutation<TData, TError, TVariables>([client, method], (params) => client[method](...params));\n\n  return Object.assign({}, mutation, {\n    [method]: mutation.mutate,\n    [`${method}Async`]: mutation.mutateAsync,\n  });\n}\n\nexport default useApiMutation;\n","import cx from 'classnames';\nimport styled from 'styled-components';\n\nimport './styles.css';\n\nconst ICONS_MAP = {\n  notifications_active: <>&#xe7f7;</>,\n  new_releases: <>&#xe031;</>,\n  library_music: <>&#xe030;</>,\n  live_tv: <>&#xe639;</>,\n  play_arrow: <>&#xe037;</>,\n  play_circle_outline: <>&#xe039;</>,\n  sports_soccer: <>&#xea2f;</>,\n};\n\ntype Props = {\n  name: string;\n};\n\nconst Icon = styled.i.attrs<Props>(({ name, className, ...props }) => ({\n  ...props,\n  className: cx(`material-icons`, className),\n  children: ICONS_MAP[name as keyof typeof ICONS_MAP] || name,\n}))<Props>``;\n\nexport default Icon;\n","import isArray from 'lodash/isArray';\n\ntype Primitive = string | number | boolean;\n\ntype Param = Primitive | null | undefined | Param[] | { [key: string]: Param };\n\ntype Params = Record<string, Param> | null;\n\nfunction isPrimitive(value: any): value is Primitive {\n  return value !== Object(value);\n}\n\nexport const stringifyParams = (params?: Params) =>\n  JSON.stringify(params, (_, value) => {\n    if (value === null || value === '') {\n      return undefined;\n    }\n\n    return value;\n  });\n\nexport const encodeParam = (param: Param) =>\n  encodeURIComponent(isPrimitive(param) ? (param as Primitive) : stringifyParams(param as Record<string, Param>));\n\nexport const normalizeArrayParams = (key: string, params: Param[]) =>\n  params.map((param, idx) => `${encodeParam(`${key}[${idx}]`)}=${encodeParam(param)}`).join('&');\n\nexport const normalizeParams = (params?: Params) =>\n  Object.keys(params || {})\n    .filter((key) => params?.[key] !== '' && params?.[key] !== null && params?.[key] !== undefined)\n    .map((key) => (isArray(params?.[key]) ? normalizeArrayParams(key, params?.[key]! as Param[]) : `${key}=${encodeParam(params?.[key])}`))\n    .join('&');\n\nclass BaseApiClient {\n  protected baseUrl: string;\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl;\n  }\n\n  private async request<T>(method: 'GET' | 'POST', url: string, params?: Params, data?: Params) {\n    const accessToken = this.getAccessToken();\n\n    const headers: HeadersInit = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    };\n\n    if (accessToken) {\n      headers['Authorization'] = `Bearer ${accessToken}`;\n    }\n\n    try {\n      const response = await fetch(`${this.baseUrl}${url}?${normalizeParams(params)}`, {\n        method,\n        headers,\n        body: stringifyParams(data),\n      });\n\n      if (response.status === 401) {\n        this.clearTokens();\n      }\n\n      const json = await response.json();\n\n      return json as T;\n    } catch (ex) {\n      return ({\n        error: ex.toString() as string,\n      } as unknown) as T;\n    }\n  }\n\n  protected get<T>(url: string, params?: Params) {\n    return this.request<T>('GET', url, params);\n  }\n\n  protected post<T>(url: string, data?: Params, params?: Params) {\n    return this.request<T>('POST', url, params, data);\n  }\n\n  protected getAccessToken(): string {\n    throw new Error('not implemented');\n  }\n\n  protected getRefreshToken(): string {\n    throw new Error('not implemented');\n  }\n\n  protected saveTokens({\n    access_token,\n    refresh_token,\n    expires_in,\n  }: {\n    access_token: string;\n    refresh_token: string;\n    expires_in: number;\n  }): void | Promise<void> {\n    throw new Error('not implemented');\n  }\n\n  protected clearTokens(): void | Promise<void> {\n    throw new Error('not implemented');\n  }\n}\n\nexport default BaseApiClient;\n","/* eslint-disable no-shadow */\n\nexport enum Bool {\n  True = 1,\n  False = 0,\n}\n\nexport type Streaming = 'http' | 'hls' | 'hls2' | 'hls4';\n\nexport type DeviceInfo = {\n  /**\n   * Название устройства.\n   */\n  title: string;\n\n  /**\n   * Информация по “железу” устройства.\n   */\n  hardware: string;\n\n  /**\n   * Информация по софту устройства.\n   */\n  software: string;\n};\n\nexport type User = {\n  username: string;\n  reg_date: number;\n  subscription: {\n    active: boolean;\n    end_time: number;\n    days: number;\n  };\n  profile: {\n    name: string;\n    avatar: string;\n  };\n};\n\nexport type ServerLocation = {\n  id: string;\n  location: string;\n  name: string;\n};\n\nexport type StreamingType = {\n  id: string;\n  code: Streaming;\n  name: string;\n  description: string;\n};\n\nexport type VoiceoverType = {\n  id: string;\n  title: string;\n  short_title: string;\n};\n\nexport type VoiceoverAuthor = {\n  id: string;\n  title: string;\n  short_title: string;\n};\n\nexport type VideoQuality = {\n  id: string;\n  title: string;\n  quality: number;\n};\n\nexport type Type = {\n  id: string;\n  title: string;\n};\n\nexport type Gender = {\n  id: string;\n  title: string;\n  type: string;\n};\n\nexport type Country = {\n  id: string;\n  title: string;\n};\n\nexport type DeviceSettingBoolean = {\n  type: undefined;\n  label: string;\n  value: Bool;\n};\n\nexport type DeviceSettingList = {\n  type: 'list';\n  label: string;\n  value: {\n    id: string;\n    label: string;\n    description: string;\n    selected: Bool;\n  }[];\n};\n\nexport type DeviceSettings = {\n  /**\n   * Поддерживает ли устройство SSL\n   */\n  supportSsl: DeviceSettingBoolean;\n\n  /**\n   * Поддерживает ли устройство HEVC\n   */\n  supportHevc: DeviceSettingBoolean;\n\n  /**\n   * Поддерживает ли устройство HDR (10bit color)\n   */\n  supportHdr: DeviceSettingBoolean;\n\n  /**\n   * Поддерживает ли устройство UHD/4K\n   */\n  support4k: DeviceSettingBoolean;\n\n  /**\n   * На данный момент только для HLS4, плейлист строится из всех доступных файлов AVC+HEVC\n   */\n  mixedPlaylist: DeviceSettingBoolean;\n\n  /**\n   * Типа стриминга\n   */\n  streamingType: DeviceSettingList;\n\n  /**\n   * Регион, откуда получать контент\n   */\n  serverLocation: DeviceSettingList;\n};\n\nexport type Device = {\n  id: string;\n  title: string;\n  hardware: string;\n  software: string;\n  created: number;\n  updated: number;\n  last_seen: number;\n  is_browser: number;\n  settings: DeviceSettings;\n};\n\nexport type Tracklist = {\n  /**\n   * Исполнитель\n   */\n  artist: string;\n\n  /**\n   * Название композиции\n   */\n  title: string;\n\n  /**\n   * Ссылка на аудио файл\n   */\n  url: string;\n};\n\nexport type Subtitle = {\n  lang: string;\n  /**\n   * Смещение относительно видео-потока\n   */\n  shift: number;\n\n  /**\n   * Доступно в файле-исходнике, вшиты в него отдельным стримом\n   */\n  embed: boolean;\n\n  file: string;\n\n  url: string;\n};\n\nexport type Audio = {\n  id: string;\n  index: number;\n  codec: 'aac' | 'ac3';\n  channels: number;\n  lang: string;\n  type?: {\n    id: string;\n    title: string;\n    short_title?: string;\n  };\n  author?: {\n    id: string;\n    title: string;\n    short_title?: string;\n  };\n};\n\nexport type File = {\n  w: number;\n  h: number;\n  codec: string;\n  quality: string;\n  quality_id: string;\n  file: string;\n  url: {\n    http: string;\n    hls?: string;\n    hls2?: string;\n    hls4?: string;\n  };\n};\n\nexport type Trailer = {\n  id: string;\n  url: string;\n  files?: File[];\n};\n\nexport type Posters = {\n  small: string;\n  medium: string;\n  big: string;\n  wide?: string;\n};\n\nexport enum WatchingStatus {\n  NoWatched = -1,\n  Watching = 0,\n  Watched = 1,\n}\n\nexport type Video = {\n  id: string;\n\n  title: string;\n  thumbnail: string;\n\n  number: number;\n\n  /**\n   * Время в секундах\n   */\n  duration: number;\n\n  /**\n   * Статус просмотра эпизода: -1 не смотрели вообще, 0 - начали смотреть, 1 - просмотрели\n   */\n  watched: WatchingStatus;\n\n  watching: {\n    /**\n     * Статус просмотра эпизода: -1 не смотрели вообще, 0 - начали смотреть, 1 - просмотрели\n     */\n    status: WatchingStatus;\n\n    /**\n     * Время просмотра в секундах\n     */\n    time: number;\n  };\n  /**\n   * Номера аудио-дорожек ('1,2,3,4')\n   */\n  tracks: string[];\n  subtitles: Subtitle[];\n  audios: Audio[];\n  files: File[];\n  ac3: Bool;\n};\n\nexport type Season = {\n  id: string;\n\n  /**\n   * Название сезона\n   */\n  title: string;\n\n  number: number;\n\n  episodes: Video[];\n\n  /**\n   * Статус просмотра эпизода: -1 не смотрели вообще, 0 - начали смотреть, 1 - просмотрели\n   */\n  watched: WatchingStatus;\n\n  watching: {\n    /**\n     * Статус просмотра эпизода: -1 не смотрели вообще, 0 - начали смотреть, 1 - просмотрели\n     */\n    status: WatchingStatus;\n\n    /**\n     * Время просмотра в секундах\n     */\n    time: number;\n  };\n};\n\nexport type Item = {\n  id: string;\n\n  /**\n   * Название / Оригинальное название\n   */\n  title: string;\n\n  /**\n   * Тип контента\n   */\n  type: string;\n\n  /**\n   * Подтип контента, бывают многосерийные фильмы, концерты\n   */\n  subtype: 'multi' | string;\n  year: number;\n  cast: string;\n  director: string;\n  voice: string;\n\n  created_at: number;\n\n  updated_at: number;\n\n  /**\n   * Продолжительность фильма/сериала\n   */\n  duration: {\n    /**\n     * Средняя продолжительность для сериалов, полная для фильмов\n     */\n    average: number;\n\n    /**\n     * Общая продолжительность фильма, сериала\n     */\n    total: number;\n  };\n\n  /**\n   * Количество аудио дорожек\n   */\n  langs: number;\n\n  /**\n   * Присутствуют или нет AC-3 аудио\n   */\n  ac3: Bool;\n\n  /**\n   * Количество субтитров\n   */\n  subtitles: number;\n\n  /**\n   * Качество фильма, для сериалов берется наибольшее количество серий с определенным качеством\n   */\n  quality: number;\n\n  poor_quality: boolean;\n\n  genres: Gender[];\n  countries: Country[];\n\n  /**\n   * Описание фильма\n   */\n  plot: string;\n\n  tracklist: Tracklist[];\n  imdb: number;\n  imdb_rating: number;\n  imdb_votes: number;\n  kinopoisk: number;\n  kinopoisk_rating: number;\n  kinopoisk_votes: number;\n  rating: number;\n  views: number;\n  comments: number;\n\n  /**\n   * Для сериалов: true - окончен, false - снимается\n   */\n  finished: boolean;\n\n  /**\n   * Присутствуют посторонние вставки рекламы\n   */\n  advert: boolean;\n\n  /**\n   * Подписан ли пользователь на сериал\n   */\n  in_watchlist: true;\n\n  /**\n   * Подписан ли пользователь на сериал, alias in_watchlist\n   */\n  subscribed: true;\n\n  bookmarks: {\n    id: string;\n    title: string;\n  }[];\n\n  posters: Posters;\n  trailer: Trailer;\n\n  /**\n   * Всего эпизодов\n   */\n  total?: number;\n\n  /**\n   * Просмотренных эпизодов\n   */\n  watched?: number;\n\n  /**\n   * Новых/недосмотренных эпизовод\n   */\n  new?: number;\n};\n\nexport type ItemDetails = {\n  videos?: Video[];\n  seasons?: Season[];\n} & Item;\n\nexport type Comment = {\n  id: string;\n  depth: number;\n  unread: boolean;\n  deleted: boolean;\n  message: string;\n  created: number;\n  rating: number;\n  user: {\n    id: string;\n    name: string;\n    avatar: string;\n  };\n};\n\nexport type Channel = {\n  id: string;\n  title: string;\n  name: string;\n  logos: {\n    s: string;\n    m: string;\n  };\n  stream: string;\n};\n\nexport type Bookmark = {\n  id: string;\n  title: string;\n  views: number;\n  count: number;\n  created: number;\n  updated: number;\n};\n\nexport type Collection = {\n  id: string;\n  title: string;\n  watchers: number;\n  views: number;\n  created: number;\n  updated: number;\n  posters: Posters;\n};\n\nexport type History = {\n  /**\n   * Время где остановились\n   */\n  time: number;\n\n  /**\n   * Сколько раз смотрели данный media\n   */\n  counter: number;\n\n  /**\n   * Когда впервые посмотрели media\n   */\n  first_seen: number;\n\n  /**\n   * Когда последний раз посмотрели media\n   */\n  last_seen: number;\n\n  /**\n   * Описание item\n   */\n  item: Item;\n\n  /**\n   * Описание media\n   */\n  media: Video;\n};\n\nexport type Pagination = {\n  total: number;\n  current: number;\n  perpage: number;\n  total_items?: number;\n};\n\nexport type OnConfirm = (userCode: string, verificationUri: string) => void | Promise<void>;\n\nexport type Response = {\n  status?: number;\n  error?: string;\n  error_description?: string;\n};\n\nexport type PaginationResponse = {\n  pagination: Pagination;\n} & Response;\n\nexport type DeviceCodeResponse = {\n  /**\n   * Код, для дальнейшего получения access token'a\n   */\n  code: string;\n\n  /**\n   * Код который нужно показать пользователю\n   */\n  user_code: string;\n\n  /**\n   * URL где нужно ввести пользовательский код\n   */\n  verification_uri: string;\n\n  /**\n   * Через сколько данный device_code перестанет быть валидным\n   */\n  expires_in: number;\n\n  /**\n   * Интервал в секундах, через который посылать запросы на проверку активацииs\n   */\n  interval: number;\n} & Response;\n\nexport type TokensResponse = {\n  /**\n   * Токен, который требуется для обращения к API\n   */\n  access_token: string;\n\n  /**\n   * Тип токена (bearer)\n   */\n  token_type: string;\n\n  /**\n   * Через сколько данный access_token перестанет быть валидным\n   */\n  expires_in: number;\n\n  /**\n   * Токен, с помощью которого можно получать access_token без получения device_code\n   */\n  refresh_token: string;\n} & Response;\n\nexport type UserReponse = {\n  user: User;\n} & Response;\n\nexport type ServerLocationsReponse = {\n  items: ServerLocation[];\n} & Response;\n\nexport type StreamingTypesReponse = {\n  items: StreamingType[];\n} & Response;\n\nexport type VoiceoverTypesResponse = {\n  items: VoiceoverType[];\n} & Response;\n\nexport type VoiceoverAuthorsResponse = {\n  items: VoiceoverAuthor[];\n} & Response;\n\nexport type VideoQualitiesResponse = {\n  items: VideoQuality[];\n} & Response;\n\nexport type DevicesResponse = {\n  devices: Device[];\n} & Response;\n\nexport type DeviceInfoResponse = {\n  device: Device;\n} & Response;\n\nexport type DeviceRemoveResponse = {\n  /**\n   * Указывает, что данный запрос вызван текущим устройством или нет.\n   * Удаление текущего устройства/браузера равносильно логауту.\n   */\n  current: boolean;\n} & Response;\n\nexport type DeviceSettingsResponse = {\n  settings: DeviceSettings;\n} & Response;\n\nexport type DeviceSettingsParams = {\n  [key in keyof DeviceSettings]?: DeviceSettings[key] extends DeviceSettingBoolean ? boolean : number;\n};\n\nexport type TypesResponse = Type[];\n\nexport type GendersResponse = Gender[];\n\nexport type CountriesResponse = Country[];\n\nexport type ItemsParams = {\n  /**\n   * Тип видео контента\n   */\n  type?: string;\n\n  /**\n   * Поиск по заголовку, минимум 3 символа. Выборка по типу LIKE ‘$ASD’\n   */\n  title?: string;\n\n  /**\n   * id жанра. Для множественного поиска список через запятую.\n   */\n  genre?: string;\n\n  /**\n   * id страны. Для множественного поиска список через запятую.\n   */\n  country?: string;\n\n  /**\n   * Год. Для поиска в промежутке year1-year2\n   */\n  year?: string;\n\n  /**\n   * Статус сериала, завершен/снимается\n   */\n  finished?: Bool;\n\n  /**\n   * Имена актеров чере запятую или +(плюс), “Actor1,Actor2+Actor3” - ищет (Actor1 OR (Actor2 AND Actor3))\n   */\n  actor?: string;\n\n  /**\n   * Имена режисеров чере запятую или +(плюс), “Actor1,Actor2+Actor3” - ищет (Actor1 OR (Actor2 AND Actor3))\n   */\n  director?: string;\n\n  /**\n   * Поиск по первой букве в названиях(рус, анг) фильма\n   */\n  letter?: string;\n\n  /**\n   * Массив простых условий для фильтра. Доступные поля как и в сортировке. year <= 100. Объединение условий через AND\n   */\n  conditions?: string[];\n\n  /**\n   * Массив для пропуска пользовательских настроек фильтрации\n   *\n   * * quality - Пропускаем проверку на сомнительное качество\n   * * advert - Пропускаем проверку на контент с рекламой\n   * * erotic - Пропускаем проверку на эротический контент\n   */\n  force?: ('quality' | 'advert' | 'erotic')[];\n\n  /**\n   * Сортировка, по умолчанию ‘updated-‘.\n   * Без знака ‘-‘ сортируется по возрастанию(ASC), со знаком ‘-‘(минус) по убыванию(DESC).\n   * Можно указать можество полей через запятую,.\n   *\n   * * id\n   * * year\n   * * title\n   * * created\n   * * updated\n   * * rating\n   * * views\n   * * watchers\n   */\n  sort?: string;\n\n  period?: string;\n\n  /**\n   * Массив идентификаторов качеств\n   */\n  quality?: string[];\n};\n\nexport type ItemsResponse = {\n  items: Item[];\n} & PaginationResponse;\n\nexport type ItemsSearchParams = {\n  /**\n   * Строка поиска\n   */\n  q: string;\n\n  /**\n   * Тип контента\n   */\n  type?: string;\n\n  /**\n   * Поиск только в одном из полей title, director, cast. Если не указанно, поиск по всем полям\n   */\n  field?: string;\n\n  /**\n   * Разбивает запрос по секциям type. По умолчанию 0\n   */\n  sectioned?: Bool;\n};\n\nexport type ItemsWithPagination = {\n  items: Item[];\n  pagination: Pagination;\n};\n\nexport type ItemsSearchResponse<Sectioned extends Bool | undefined> = (Sectioned extends Bool.True\n  ? {\n      items: {\n        [key: string]: ItemsWithPagination;\n      };\n    }\n  : ItemsWithPagination) &\n  Response;\n\nexport type ItemMediaResponse = {\n  item: ItemDetails;\n} & Response;\n\nexport type ItemMediaLinksResponse = {\n  files: File[];\n  subtitles: Subtitle[];\n};\n\nexport type ItemVoteResponse = {\n  /**\n   * Засчитался ли голос\n   */\n  voted: boolean;\n\n  /**\n   * Всего голосов\n   */\n  total: number;\n\n  /**\n   * Позитивных голосов\n   */\n  positive: number;\n\n  /**\n   * Негативных голосов\n   */\n  negative: number;\n\n  /**\n   * Подсчитанный рейтинг: позитивные минус негативные\n   */\n  rating: number;\n};\n\nexport type ItemCommentsResponse = {\n  item: {\n    id: string;\n    title: string;\n  };\n  comments: Comment[];\n} & Response;\n\nexport type ItemTrailerResponse = {\n  trailer: Trailer;\n} & Response;\n\nexport type ChannelsResponse = {\n  channels: Channel[];\n} & Response;\n\nexport type BookmarksResponse = {\n  items: Bookmark[];\n} & Response;\n\nexport type BookmarkItemsResponse = {\n  folder: Bookmark;\n  items: Item[];\n} & PaginationResponse;\n\nexport type ItemBookmarksResponse = {\n  folders: Bookmark[];\n} & Response;\n\nexport type BookmarkCreateResponse = {\n  folder: Bookmark;\n} & Response;\n\nexport type WatchingItemResponse = {\n  item: {\n    id: string;\n    title: string;\n    type: string;\n\n    /**\n     * В зависимости от типа контента данная часть может меняться\n     * Для сериалов\n     */\n    seasons: Season[];\n\n    /**\n     * Для фильмов, многосерийных фильмов и тд\n     */\n    videos: Video[];\n  };\n} & Response;\n\nexport type WatchingItemsResponse = {\n  items: Item[];\n};\n\nexport type WatchingToggleResponse = {\n  /**\n   * 0 - отмечено как непросмотренные, 1 - отмечено как просмотренные\n   */\n  watched: Bool;\n} & Response;\n\nexport type WatchingToggleWatchlistResponse = {\n  /**\n   * false - отмечено как непросмотренные, true - отмечено как просмотренные\n   */\n  watching: boolean;\n} & Response;\n\nexport type CollectionsResponse = {\n  items: Collection[];\n} & Response;\n\nexport type CollectionItemsResponse = {\n  collection: Collection;\n  items: Item[];\n};\n\nexport type HistoryResponse = {\n  history: History[];\n} & PaginationResponse;\n","import BaseApiClient from './base';\nimport {\n  BookmarkCreateResponse,\n  BookmarkItemsResponse,\n  BookmarksResponse,\n  Bool,\n  ChannelsResponse,\n  CollectionItemsResponse,\n  CollectionsResponse,\n  CountriesResponse,\n  DeviceCodeResponse,\n  DeviceInfo,\n  DeviceInfoResponse,\n  DeviceRemoveResponse,\n  DeviceSettingsParams,\n  DeviceSettingsResponse,\n  DevicesResponse,\n  GendersResponse,\n  HistoryResponse,\n  ItemBookmarksResponse,\n  ItemMediaLinksResponse,\n  ItemMediaResponse,\n  ItemTrailerResponse,\n  ItemVoteResponse,\n  ItemsParams,\n  ItemsResponse,\n  ItemsSearchParams,\n  ItemsSearchResponse,\n  OnConfirm,\n  ServerLocationsReponse,\n  StreamingTypesReponse,\n  TokensResponse,\n  TypesResponse,\n  UserReponse,\n  VideoQualitiesResponse,\n  VoiceoverAuthorsResponse,\n  VoiceoverTypesResponse,\n  WatchingItemResponse,\n  WatchingItemsResponse,\n  WatchingToggleResponse,\n  WatchingToggleWatchlistResponse,\n} from './typings';\n\nconst KINOPUB_API_BASE_URL = process.env.KINOPUB_API_BASE_URL || 'https://api.service-kp.com';\nconst KINOPUB_API_CLIENT_ID = process.env.KINOPUB_API_CLIENT_ID || 'xbmc';\nconst KINOPUB_API_CLIENT_SECRET = process.env.KINOPUB_API_CLIENT_SECRET || 'cgg3gtifu46urtfp2zp1nqtba0k2ezxh';\n\nclass KinopubApiClient extends BaseApiClient {\n  private clientId: string;\n\n  private clientSecret: string;\n\n  private accessTokenCheckIntervaId!: NodeJS.Timeout | null;\n\n  constructor(\n    clientId: string = KINOPUB_API_CLIENT_ID,\n    clientSecret: string = KINOPUB_API_CLIENT_SECRET,\n    baseUrl: string = KINOPUB_API_BASE_URL,\n  ) {\n    super(baseUrl);\n\n    this.clientId = clientId;\n    this.clientSecret = clientSecret;\n  }\n\n  clearTimers() {\n    clearInterval(this.accessTokenCheckIntervaId!);\n\n    this.accessTokenCheckIntervaId = null;\n  }\n\n  private async processTokensReponse(response: TokensResponse, deviceInfo: DeviceInfo, onSuccess?: Function) {\n    await this.clearTokens();\n\n    switch (response.error) {\n      case 'authorization_pending':\n        break;\n\n      case undefined:\n        this.clearTimers();\n\n        await this.saveTokens(response);\n        this.deviceNotify(deviceInfo);\n        onSuccess?.();\n        return;\n\n      default:\n        this.clearTimers();\n        throw response.error;\n    }\n  }\n\n  /**\n   * Получение access_token и refresh_token\n   * @param code Код для получения access_token и refresh_token\n   */\n  async requestTokens(code: string) {\n    const response = await this.post<TokensResponse>(`/oauth2/device`, null, {\n      grant_type: 'device_token',\n      client_id: this.clientId,\n      client_secret: this.clientSecret,\n      code,\n    });\n\n    return response;\n  }\n\n  /**\n   * Обновление access_token и refresh_token\n   * @param refresh_token Код для обновления access_token и refresh_token\n   */\n  async refreshTokens(refresh_token: string) {\n    const response = await this.post<TokensResponse>(`/oauth2/token`, null, {\n      grant_type: 'refresh_token',\n      client_id: this.clientId,\n      client_secret: this.clientSecret,\n      refresh_token,\n    });\n\n    return response;\n  }\n\n  /**\n   * Получение device_code\n   */\n  async requestDeviceCode() {\n    const response = await this.post<DeviceCodeResponse>(`/oauth2/device`, null, {\n      grant_type: 'device_code',\n      client_id: this.clientId,\n      client_secret: this.clientSecret,\n    });\n\n    return response;\n  }\n\n  /**\n   * Авторизация устройства\n   */\n  async deviceAuthorization(deviceInfo: DeviceInfo, onConfirm?: OnConfirm) {\n    const refreshToken = this.getRefreshToken();\n\n    if (refreshToken) {\n      const response = await this.refreshTokens(refreshToken);\n\n      await this.processTokensReponse(response, deviceInfo);\n    } else {\n      const { interval, code, user_code, verification_uri } = await this.requestDeviceCode();\n\n      onConfirm?.(user_code, verification_uri);\n\n      await new Promise<void>((resolve, reject) => {\n        this.clearTimers();\n        this.accessTokenCheckIntervaId = setInterval(async () => {\n          const response = await this.requestTokens(code);\n\n          try {\n            await this.processTokensReponse(response, deviceInfo, resolve);\n          } catch (ex) {\n            reject(ex);\n          }\n        }, (interval || 10) * 1000);\n      });\n    }\n  }\n\n  /**\n   * Отключение устройства\n   */\n  deactivate() {\n    this.deviceUnlink();\n\n    this.clearTokens();\n    this.clearTimers();\n  }\n\n  /**\n   * Информация о пользователе\n   */\n  user() {\n    return this.get<UserReponse>(`/v1/user`);\n  }\n\n  /**\n   * Список локаций сервера\n   */\n  serverLocations() {\n    return this.get<ServerLocationsReponse>(`/v1/references/server-location`);\n  }\n\n  /**\n   * Список типов стриминга\n   */\n  streamingTypes() {\n    return this.get<StreamingTypesReponse>(`/v1/references/streaming-type`);\n  }\n\n  /**\n   * Список типов переводов\n   */\n  voiceoverTypes() {\n    return this.get<VoiceoverTypesResponse>(`/v1/references/voiceover-type`);\n  }\n\n  /**\n   * Список авторов озвучек/переводов\n   */\n  voiceoverAuthors() {\n    return this.get<VoiceoverAuthorsResponse>(`/v1/references/voiceover-author`);\n  }\n\n  /**\n   * Список качеств видео\n   */\n  videoQualities() {\n    return this.get<VideoQualitiesResponse>(`/v1/references/video-quality`);\n  }\n\n  /**\n   * Список устройств на аккаунте\n   */\n  devices() {\n    return this.get<DevicesResponse>(`/v1/device`);\n  }\n\n  /**\n   * Информация о текущем устройстве\n   */\n  deviceInfo() {\n    return this.get<DeviceInfoResponse>(`/v1/device/info`);\n  }\n\n  /**\n   * Информация о устройстве\n   * @param id Идентификатор устройства\n   */\n  deviceInfoById(id: string) {\n    return this.get<DeviceInfoResponse>(`/v1/device/${id}`);\n  }\n\n  /**\n   * Удаление текущего устройства\n   */\n  deviceUnlink() {\n    return this.post<Response>(`/v1/device/unlink`);\n  }\n\n  /**\n   * Удаление устройства\n   * @param id Идентификатор устройства\n   */\n  deviceRemoveById(id: string) {\n    return this.post<DeviceRemoveResponse>(`/v1/device/${id}/remove`);\n  }\n\n  /**\n   * Изменение информации о текущем устройстве\n   * @param deviceInfo Информация о текущем устройстве\n   */\n  deviceNotify(deviceInfo: DeviceInfo) {\n    return this.post<Response>(`/v1/device/notify`, deviceInfo);\n  }\n\n  /**\n   * Получение настроек устройства\n   * @description На данный момент все настройки разбиваются на тип “чекбокс” и “список”. “Чекбокс” это настройки вида да/нет (1/0).\n   * Если не указан type, значит настройка трактуется как “чекбокс”.\n   * Если указан type: ‘list’, значит надо обрабатывать как список, формат\n   *\n   * Набор полей в списках всегда одинаков - id, label, description, selected\n   *\n   * Доступные настройки:\n   * * supportSsl boolean - Поддерживает ли устройство SSL\n   * * supportHevc boolean - Поддерживает ли устройство HEVC\n   * * supportHdr boolean - Поддерживает ли устройство HDR (10bit color)\n   * * support4k boolean - Поддерживает ли устройство UHD/4K\n   * * mixedPlaylist boolean - На данный момент только для HLS4, плейлист строится из всех доступных файлов AVC+HEVC.\n   * * streamingType integer - Идентификатор типа стриминга\n   * * serverLocation integer - Идентификатор региона, откуда получать контент\n   */\n  deviceSettings(id: string) {\n    return this.get<DeviceSettingsResponse>(`/v1/device/${id}/settings`);\n  }\n\n  /**\n   * Изменение настроек устройства\n   */\n  saveDeviceSettings(id: string, settings: DeviceSettingsParams) {\n    return this.post<Response>(`/v1/device/${id}/settings`, settings);\n  }\n\n  /**\n   * Типы контента\n   * @description Видео контент условно разделен на типы:\n   * * movie - Фильмы\n   * * serial - Сериалы\n   * * 3D - 3D Фильмы\n   * * concert - Концерты\n   * * documovie - Документальные фильмы\n   * * docuserial - Документальные сериалы\n   * * tvshow - ТВ Шоу\n   */\n  types() {\n    return this.get<TypesResponse>(`/v1/types`);\n  }\n\n  /**\n   * Типы жанров\n   * @description Жанры, как и контент, разделены по типам.\n   * Видео контент с типом movie, serial, 3d может принадлежать только жанрам с типом movie и т.д.\n   * * movie - жанры типов видео контента movie, serial, 3D (Фильмов и Сериалов)\n   * * music - жанры типов видео контента concert (Концерты)\n   * * docu - жанры типов видео контента documovie, docuserial (Документальные фильмы и сериалы)\n   */\n  genders() {\n    return this.get<GendersResponse>(`/v1/genres`);\n  }\n\n  /**\n   * Спиоск стран\n   */\n  countries() {\n    return this.get<CountriesResponse>(`/v1/countries`);\n  }\n\n  /**\n   * Видео контент\n   */\n  items(params: ItemsParams, page?: number, perpage?: number) {\n    return this.get<ItemsResponse>(`/v1/items`, {\n      ...params,\n      page,\n      perpage,\n    });\n  }\n\n  /**\n   * Поиск\n   * @description Поиск производится по полям title, director, cast\n   */\n  itemsSearch(params: ItemsSearchParams, page?: number, perpage?: number) {\n    return this.get<ItemsSearchResponse<typeof params['sectioned']>>(`/v1/items/search`, {\n      ...params,\n      page,\n      perpage,\n    });\n  }\n\n  /**\n   * Похожие видео\n   * @param id Идентификатор item для которого проивзодится поиск похожих\n   */\n  itemSmiliar(id: string) {\n    return this.get<ItemsResponse>(`/v1/items/similar`, { id });\n  }\n\n  /**\n   * Список медиа-контента\n   * @param id Идентификатор item для которого запрашивается медиа-контент\n   * @param nolinks 1 исключает ссылки на видео (значение по умолчания - 0).\n   * У больших сериалов ссылки занимают львиную долю объема ответа причем большинство из этих ссылок не используется в рамках 1 запроса.\n   * В следующей версии значение по умолчанию станет 1, а через версию параметр станет недоступным и ссылки нужно будет всегда получать в отдельном запросе.\n   */\n  itemMedia(id: string, nolinks: Bool = Bool.True) {\n    return this.get<ItemMediaResponse>(`/v1/items/${id}`, { nolinks });\n  }\n\n  /**\n   * Ссылки на субтитры и видео-файлы для media\n   * @param id Идентификатор media\n   */\n  itemMediaLinks(id: string) {\n    return this.get<ItemMediaLinksResponse>(`/v1/items/media-links`, { mid: id });\n  }\n\n  /**\n   * Ссылка на видео-файл по имени файла\n   * @param file Путь к файлуv\n   * @param type Тип потока, http | hls | hls2 | hls4\n   */\n  itemMediaFileLink(file: string, type: string) {\n    return this.get<{ url: string }>(`/v1/items/media-video-link`, { file, type });\n  }\n\n  /**\n   * Голосование за видео\n   * @param id Идентификатор item\n   * @param like 1: нравится, 0: не нравится\n   */\n  itemVote(id: string, like: Bool) {\n    return this.get<ItemVoteResponse>(`/v1/items/vote`, { id, like });\n  }\n\n  /**\n   * Трейлер к контенту\n   */\n  itemTrailer(id?: string, sid?: string) {\n    return this.get<ItemTrailerResponse>(`/v1/items/trailer`, { id, sid });\n  }\n\n  /**\n   * Свежие видео\n   * @param type Тип видео контента\n   * @param page Текущая страница\n   * @param perpage Количество на страницу\n   */\n  itemsFresh(type: string, page?: number, perpage?: number) {\n    return this.get<ItemsResponse>(`/v1/items/fresh`, { type, page, perpage });\n  }\n\n  /**\n   * Горячие видео\n   * @param type Тип видео контента\n   * @param page Текущая страница\n   * @param perpage Количество на страницу\n   */\n  itemsHot(type: string, page?: number, perpage?: number) {\n    return this.get<ItemsResponse>(`/v1/items/hot`, { type, page, perpage });\n  }\n\n  /**\n   * Популярные видео\n   * @param type Тип видео контента\n   * @param page Текущая страница\n   * @param perpage Количество на страницу\n   */\n  itemsPopular(type: string, page?: number, perpage?: number) {\n    return this.get<ItemsResponse>(`/v1/items/popular`, { type, page, perpage });\n  }\n\n  /**\n   * Список транслируемых каналов\n   * @description Транслируемые, на данный момент, каналы. Обычно это какие-то события типа Евро 2016, Рио 2016.\n   */\n  channels() {\n    return this.get<ChannelsResponse>(`/v1/tv`);\n  }\n\n  /**\n   * Список папок в закладках\n   */\n  bookmarks() {\n    return this.get<BookmarksResponse>(`/v1/bookmarks`);\n  }\n\n  /**\n   * Список фильмов/сериалов в папке\n   * @param id Идентификатор закладки\n   * @param page Текущая страница\n   * @param perpage Количество на страницу\n   */\n  bookmarkItems(id: string, page?: number, perpage?: number) {\n    return this.get<BookmarkItemsResponse>(`/v1/bookmarks/${id}`, { page, perpage });\n  }\n\n  /**\n   * Список папок в которых присутствует фильм\n   * @param id Идентификатор item\n   */\n  itemBookmarks(id: string) {\n    return this.get<ItemBookmarksResponse>(`/v1/bookmarks/get-item-folders`, { item: id });\n  }\n\n  /**\n   * Создать папку\n   * @param title Название папки\n   */\n  bookmarkCreate(title: string) {\n    return this.post<BookmarkCreateResponse>(`/v1/bookmarks/create`, { title });\n  }\n\n  /**\n   * Удаление папки\n   * @param folder Идентификатор папки\n   */\n  bookmarkRemove(folder: string) {\n    return this.post<Response>(`/v1/bookmarks/remove-folder`, { folder });\n  }\n\n  /**\n   * Добавление фильма в папку\n   * @param item Идентификатор фильма\n   * @param folder Идентификатор папки\n   */\n  bookmarkAddItem(item: string, folder: string) {\n    return this.post<Response>(`/v1/bookmarks/add`, { item, folder });\n  }\n\n  /**\n   * Удаление фильма из папки/папок\n   * @param item Идентификатор фильма\n   * @param folder Идентификатор папки, если отсутствует - удаляем из всех папок\n   */\n  bookmarkRemoveItem(item: string, folder?: string) {\n    return this.post<Response>(`/v1/bookmarks/remove-item`, { item, folder });\n  }\n\n  /**\n   * Переключение добвить/удалить фильм\n   * @param item Идентификатор фильма\n   * @param folder Идентификатор папки\n   */\n  bookmarkToggleItem(item: string, folder: string) {\n    return this.post<Response>(`/v1/bookmarks/toggle-item`, { item, folder });\n  }\n\n  /**\n   * Информация по просмотрам видео\n   * @param id Идентификатор фильма/сериала/и тд\n   * @param video Номер видео, начинается с 1. Если отсутсвует выводятся все видео.\n   * @param season Номер сезона, присутсвует только у сериалов, начинается с 1. Если отсутсвует, выводятся все сезоны.\n   */\n  watchingItem(id: string, video?: number, season?: number) {\n    return this.get<WatchingItemResponse>(`/v1/watching`, { id, video, season });\n  }\n\n  /**\n   * Недосмотренные фильмы/концерты/документальные фильмы/3Д¶\n   */\n  watchingMovies() {\n    return this.get<WatchingItemsResponse>(`/v1/watching/movies`);\n  }\n\n  /**\n   * Список сериалов с новыми/не досмотренными сериями\n   * @param subscribed 0 - Показывать все недосмотренные сериалы, 1 - Показывать сериалы отмеченные “Буду смотреть”\n   */\n  watchingSerials(subscribed?: Bool) {\n    return this.get<WatchingItemsResponse>(`/v1/watching/serials`, { subscribed });\n  }\n\n  /**\n   * Добавление метки о просмотре\n   * @param id Идентификатор фильма/сериала/и тд\n   * @param time Время в секундах, где остановился просмотр\n   * @param video Номер видео, начинается с 1. Если отсутсвует выводятся все видео.\n   * @param season Номер сезона, присутсвует только у сериалов, начинается с 1. Если отсутсвует для сезона, выдаст исключение 404 Not Found.\n   */\n  watchingMarkTime(id: string, time: number, video: number, season?: number) {\n    return this.get<Response>(`/v1/watching/marktime`, { id, time, video, season });\n  }\n\n  /**\n   * Изменение просмотрено/не просмотрено\n   * @param id Идентификатор фильма/сериала/и тд\n   * @param video Номер видео/эпизода, начинается с 1. Если отсутствует, модификации подвергаются все эпизоды сезона\n   * @param season Номер сезона, присутствует только у сериалов, начинается с 1.\n   */\n  watchingToggle(id: string, video?: number, season?: number) {\n    return this.get<WatchingToggleResponse>(`/v1/watching/toggle`, { id, video, season });\n  }\n\n  /**\n   * Добавление сериала в список “Буду смотреть”\n   * @param id Идентификатор фильма/сериала/и тд\n   */\n  watchingToggleWatchlist(id: string) {\n    return this.get<WatchingToggleWatchlistResponse>(`/v1/watching/togglewatchlist`, { id });\n  }\n\n  /**\n   * Список подборок\n   * @param title Поиск по заголовку, минимум 3 символа. Выборка по типу LIKE ‘$ASD’\n   * @param sort Сортировка, по умолчанию ‘updated-‘. Без знака ‘-‘ сортируется по возрастанию(ASC)\n   * * id\n   * * title\n   * * views\n   * * watchers\n   * * created\n   * * updated\n   * @param page Пагинация, текущая страница\n   * @param perpage Пагинация, кол-во на одной странице\n   * @returns\n   */\n  collections(title?: string, sort?: string, page?: number, perpage?: number) {\n    return this.get<CollectionsResponse>(`/v1/collections`, { title, sort, page, perpage });\n  }\n\n  /**\n   * Список фильмов в подбороке\n   * @param id Идентификатор подборки\n   */\n  collectionItems(id: string) {\n    return this.get<CollectionItemsResponse>(`/v1/collections/view`, { id });\n  }\n\n  /**\n   * Получение истории просмотров\n   * @param page Номер страницы\n   * @param perpage Кол-во на страницы, по умолчанию 20, максимум 50\n   */\n  history(page?: number, perpage?: number) {\n    return this.get<HistoryResponse>(`/v1/history`, { page, perpage });\n  }\n\n  /**\n   * Очистить просмотр для media\n   * @param id Идентификатор media\n   */\n  historyClearMedia(id: string) {\n    return this.post<Response>(`/v1/history/clear-for-media`, null, { id });\n  }\n\n  /**\n   * Очистить просмотр для season\n   * @param id Идентификатор season\n   */\n  historyClearSeason(id: string) {\n    return this.post<Response>(`/v1/history/clear-for-season`, null, { id });\n  }\n\n  /**\n   * Очистить просмотр для item\n   * @param id Идентификатор item\n   */\n  historyClearItem(id: string) {\n    return this.post<Response>(`/v1/history/clear-for-item`, null, { id });\n  }\n}\n\nexport default KinopubApiClient;\n","import storage from 'storage';\n\nimport KinopubApiClient from './kinopub';\n\nclass ApiClient extends KinopubApiClient {\n  constructor() {\n    super(\n      process.env.REACT_APP_KINOPUB_API_CLIENT_ID,\n      process.env.REACT_APP_KINOPUB_API_CLIENT_SECRET,\n      process.env.REACT_APP_KINOPUB_API_BASE_URL,\n    );\n  }\n\n  isLogged() {\n    return storage.getItem<boolean>('is_logged');\n  }\n\n  protected getAccessToken() {\n    return storage.getItem<string>('access_token');\n  }\n\n  protected getRefreshToken() {\n    return storage.getItem<string>('refresh_token');\n  }\n\n  protected saveTokens({ access_token, refresh_token, expires_in }: { access_token: string; refresh_token: string; expires_in: number }) {\n    storage.setItem('is_logged', true, 30 * 24 * 3600);\n    storage.setItem('access_token', access_token, expires_in);\n    storage.setItem('refresh_token', refresh_token, 30 * 24 * 3600);\n  }\n\n  protected clearTokens() {\n    (['is_logged', 'access_token', 'refresh_token'] as const).forEach(storage.removeItem);\n  }\n}\n\nexport default ApiClient;\n","import { useEffect } from 'react';\n\nimport { BackButtonHandler, registerBackButtonHandler } from 'utils/keyboard';\n\nfunction useBackButtonEffect(handler: BackButtonHandler) {\n  useEffect(() => {\n    const unregister = registerBackButtonHandler(handler);\n\n    return unregister;\n  }, [handler]);\n}\n\nexport default useBackButtonEffect;\n","export enum KeyboardCodes {\n  Play = 415,\n  Back = 461,\n}\n\nexport function isBackButton(e: KeyboardEvent): boolean {\n  return e.keyCode === KeyboardCodes.Back || e.key === 'Backspace';\n}\n\nexport function isPlayButton(e: KeyboardEvent): boolean {\n  return e.keyCode === KeyboardCodes.Play;\n}\n\nexport function isArrowUpButton(e: KeyboardEvent): boolean {\n  return e.code === 'ArrowUp';\n}\n\nexport type BackButtonHandler = () => void | boolean | Promise<void> | Promise<boolean>;\n\nlet BACK_BUTTON_HANDLERS: BackButtonHandler[];\n\nfunction listenBackButton() {\n  window.addEventListener('keydown', async (e: KeyboardEvent) => {\n    if (isBackButton(e)) {\n      for (let handler of BACK_BUTTON_HANDLERS) {\n        const result = await handler();\n\n        if (result === false) {\n          break;\n        }\n      }\n    }\n  });\n}\n\nexport function registerBackButtonHandler(handler: BackButtonHandler) {\n  if (!BACK_BUTTON_HANDLERS) {\n    BACK_BUTTON_HANDLERS = [];\n\n    listenBackButton();\n  }\n\n  BACK_BUTTON_HANDLERS = [handler, ...BACK_BUTTON_HANDLERS];\n\n  return () => {\n    BACK_BUTTON_HANDLERS = BACK_BUTTON_HANDLERS.filter((h) => h !== handler);\n  };\n}\n","import { useCallback, useEffect, useState } from 'react';\n\nimport storage, { Key, Value } from 'storage';\n\nfunction useStorageState<T extends Value = Value>(key: Key) {\n  const [value, _setValue] = useState<T>(storage.getItem<T>(key));\n  const setValue = useCallback(\n    (newValue: Value, expire?: number) => {\n      storage.setItem(key, newValue, expire);\n    },\n    [key],\n  );\n\n  useEffect(() => {\n    const listener = () => {\n      _setValue(storage.getItem<T>(key));\n    };\n\n    const unsubscribe = storage.subscribe(listener);\n\n    listener();\n\n    return unsubscribe;\n  }, [key]);\n\n  return [value, setValue] as const;\n}\n\nexport default useStorageState;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 169;","import MoonstoneSpinner, { SpinnerProps } from '@enact/moonstone/Spinner';\n\ntype Props = {} & Omit<SpinnerProps, 'component'>;\n\nconst Spinner: React.FC<Props> = (props) => {\n  // @ts-expect-error\n  return <MoonstoneSpinner {...props} centered />;\n};\n\nexport default Spinner;\n","import { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Item from '@enact/moonstone/Item';\nimport styled from 'styled-components';\n\nimport Icon from 'components/icon';\n\nconst StyledLink = styled(Item)`\n  color: inherit;\n  text-decoration: none;\n`;\n\nconst LinkInner = styled.div<{ iconOnly?: boolean }>`\n  display: flex;\n  align-items: center;\n  color: inherit;\n  text-decoration: none;\n\n  ${Icon} {\n    margin-right: ${(props) => !props.iconOnly && '0.5rem'};\n  }\n`;\n\ntype Props = {\n  href: string;\n  icon?: string;\n  iconOnly?: boolean;\n  state?: any;\n  onClick?: () => void;\n};\n\nconst Link: React.FC<Props> = ({ href, state, children, icon, iconOnly, onClick, ...props }) => {\n  const history = useHistory();\n  const handleOnClick = useCallback(() => {\n    history.push(href, state);\n    onClick?.();\n  }, [href, state, onClick, history]);\n\n  return (\n    <StyledLink {...props} onClick={handleOnClick}>\n      <LinkInner iconOnly={iconOnly}>\n        {icon && <Icon name={icon} />}\n        {!iconOnly && children}\n      </LinkInner>\n    </StyledLink>\n  );\n};\n\nexport default Link;\n","export type Value = string | number | boolean | null;\n\nexport type Key = 'is_logged' | 'access_token' | 'refresh_token' | 'streaming_type';\n\nfunction getItem(prefix: string, key: string) {\n  const data = JSON.parse(window.localStorage.getItem(prefix) || '{}') || {};\n\n  const { value, expire } = data[key] || {};\n\n  if (expire && Date.now() > expire) {\n    return null;\n  }\n\n  return value;\n}\n\nfunction setItem(prefix: string, key: string, value?: Value, expire?: number) {\n  const data = JSON.parse(window.localStorage.getItem(prefix) || '{}') || {};\n\n  window.localStorage.setItem(\n    prefix,\n    JSON.stringify({\n      ...data,\n      [key]:\n        typeof value !== 'undefined'\n          ? {\n              value,\n              expire: expire ? Date.now() + expire * 1000 : undefined,\n            }\n          : undefined,\n    }),\n  );\n}\n\nfunction removeItem(prefix: string, key: string) {\n  return setItem(prefix, key);\n}\n\nexport class Storage<TKeys extends string = string> {\n  private prefix: string;\n  private listeners: (() => void)[];\n\n  constructor(prefix: string) {\n    this.prefix = prefix;\n    this.listeners = [];\n  }\n\n  private emit() {\n    requestAnimationFrame(() => {\n      this.listeners.forEach((listener) => listener());\n    });\n  }\n\n  subscribe = (listener: () => void) => {\n    this.listeners = [...this.listeners, listener];\n\n    return () => {\n      this.listeners = this.listeners.filter((l) => l !== listener);\n    };\n  };\n\n  getItem = <T extends Value>(key: TKeys): T => {\n    return getItem(this.prefix, key);\n  };\n\n  setItem = <T extends Value>(key: TKeys, value: T, expire?: number) => {\n    const item = setItem(this.prefix, key, value, expire);\n\n    this.emit();\n\n    return item;\n  };\n\n  removeItem = (key: TKeys) => {\n    removeItem(this.prefix, key);\n\n    this.emit();\n  };\n}\n\nexport default new Storage<Key>('kinopub');\n","import { generatePath as baseGeneratePath } from 'react-router-dom';\n\nexport const PATHS = {\n  Index: '/',\n  Home: '/home',\n  Search: '/search',\n  Watching: '/watching',\n  Category: '/category/:categoryId',\n  Channels: '/channels',\n  Channel: '/channels/:channelId',\n  Bookmarks: '/bookmarks',\n  Bookmark: '/bookmarks/:bookmarkId',\n  Collections: '/collections',\n  Collection: '/collections/:collectionId',\n  History: '/history',\n  Item: '/item/:itemId',\n  Video: '/video/:videoId',\n  Trailer: '/trailer/:trailerId',\n  Pair: '/pair',\n  Speed: '/speed',\n  Settings: '/settings',\n};\n\nexport type PathValuesType = typeof PATHS[keyof typeof PATHS];\n\nexport type RouteParams = {\n  categoryId?: string;\n  channelId?: string;\n  collectionId?: string;\n  bookmarkId?: string;\n  itemId?: string;\n  videoId?: string;\n  trailerId?: string;\n};\n\nexport function generatePath(pattern: PathValuesType, params?: RouteParams, search?: Record<string, string | number>) {\n  // @ts-expect-error\n  const query = search ? `?${new URLSearchParams(search)}` : '';\n\n  return baseGeneratePath(pattern, params) + query;\n}\n","import { error } from '@enact/webos/pmloglib';\n\n// Logs any uncaught exceptions to the system logs for future troubleshooting. Payload can be\n// customized by the application for its particular requirements.\nconst handleError = (ev: ErrorEvent) => {\n  let stack = (ev.error && ev.error.stack) || null;\n\n  if (stack && stack.length > 512) {\n    // JSON must be limitted to 1024 characters so we truncate the stack to 512 for safety\n    stack = ev.error.stack.substring(0, 512);\n  }\n\n  const errorInfo = {\n    message: ev.message,\n    url: ev.filename,\n    line: ev.lineno,\n    column: ev.colno,\n    stack,\n  };\n\n  error('app.onerror', errorInfo, '');\n\n  // Calling preventDefault() will avoid logging the error to the console\n  // ev.preventDefault();\n};\n\nwindow.addEventListener('error', handleError);\n","import React from 'react';\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst FillLayout: React.FC<Props> = ({ children }) => {\n  return <>{children}</>;\n};\n\nexport default FillLayout;\n","import { useLocation } from 'react-router-dom';\nimport map from 'lodash/map';\nimport styled from 'styled-components';\n\nimport Link from 'components/link';\nimport { PATHS, generatePath } from 'routes';\n\nconst Nav = styled.nav`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 1rem 0.5rem;\n`;\n\nconst List = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0;\n`;\n\nconst ListItem = styled.li<{ active: boolean }>`\n  color: ${(props) => props.active && 'var(--main-color)'};\n`;\n\nconst menuItems: {\n  name: string;\n  icon: string;\n  href: string;\n}[][] = [\n  [\n    {\n      name: 'Главная',\n      icon: 'home',\n      href: PATHS.Home,\n    },\n    {\n      name: 'Поиск',\n      icon: 'search',\n      href: PATHS.Search,\n    },\n    {\n      name: 'Я смотрю',\n      icon: 'notifications_active',\n      href: PATHS.Watching,\n    },\n    {\n      name: 'Закладки',\n      icon: 'bookmark',\n      href: PATHS.Bookmarks,\n    },\n    {\n      name: 'Подборки',\n      icon: 'list',\n      href: PATHS.Collections,\n    },\n  ],\n  [\n    {\n      name: 'Фильмы',\n      icon: 'movie',\n      href: generatePath(PATHS.Category, { categoryId: 'movie' }),\n    },\n    {\n      name: 'Сериалы',\n      icon: 'tv',\n      href: generatePath(PATHS.Category, { categoryId: 'serial' }),\n    },\n    {\n      name: 'Концерты',\n      icon: 'library_music',\n      href: generatePath(PATHS.Category, { categoryId: 'concert' }),\n    },\n    {\n      name: 'Докуфильмы',\n      icon: 'archive',\n      href: generatePath(PATHS.Category, { categoryId: 'documovie' }),\n    },\n    {\n      name: 'Докусериалы',\n      icon: 'description',\n      href: generatePath(PATHS.Category, { categoryId: 'docuserial' }),\n    },\n    {\n      name: 'ТВ Шоу',\n      icon: 'live_tv',\n      href: generatePath(PATHS.Category, { categoryId: 'tvshow' }),\n    },\n    {\n      name: 'Спорт',\n      icon: 'sports_soccer',\n      href: generatePath(PATHS.Channels),\n    },\n  ],\n  [\n    {\n      name: 'Спидтест',\n      icon: 'speed',\n      href: PATHS.Speed,\n    },\n    {\n      name: 'Настройки',\n      icon: 'settings',\n      href: PATHS.Settings,\n    },\n  ],\n];\n\ntype Props = {};\n\nconst Menu: React.FC<Props> = (props) => {\n  const location = useLocation();\n\n  return (\n    <Nav {...props}>\n      {map(menuItems, (list, idx) => (\n        <List key={idx}>\n          {map(list, (item) => (\n            <ListItem key={item.href} active={location.pathname === item.href}>\n              <Link href={item.href} icon={item.icon}>\n                {item.name}\n              </Link>\n            </ListItem>\n          ))}\n        </List>\n      ))}\n    </Nav>\n  );\n};\n\nexport default Menu;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport Menu from 'containers/menu';\n\nconst Wrapper = styled.div`\n  display: flex;\n  height: 100%;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 1rem 0;\n`;\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst MainLayout: React.FC<Props> = ({ children, ...rest }) => {\n  return (\n    <Wrapper {...rest}>\n      <Menu />\n      <Content>{children}</Content>\n    </Wrapper>\n  );\n};\n\nexport default MainLayout;\n","import React, { Suspense, createElement, useMemo } from 'react';\nimport { Route, RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { Panel } from '@enact/moonstone/Panels';\n\nimport Spinner from 'components/spinner';\nimport FillLayout from 'layouts/fill';\nimport MainLayout from 'layouts/main';\n\nexport type ViewProps = {\n  component: RouteProps['component'];\n  layout?: 'main' | 'fill';\n} & Omit<RouteProps, 'component' | 'render'>;\n\nconst View: React.FC<ViewProps> = ({ component, layout, ...props }) => {\n  const Layout = useMemo(() => {\n    if (layout === 'fill') {\n      return FillLayout;\n    }\n\n    return MainLayout;\n  }, [layout]);\n  const render = useMemo<React.FC<RouteComponentProps>>(\n    () => (routeProps) => (\n      <Panel>\n        <Layout>\n          <Suspense fallback={<Spinner />}>{createElement(component!, routeProps)}</Suspense>\n        </Layout>\n      </Panel>\n    ),\n    [component, Layout],\n  );\n\n  return <Route {...props} render={render} />;\n};\n\nexport default View;\n","import { useEffect, useMemo, useState } from 'react';\nimport { detect } from '@enact/core/platform';\nimport { deviceinfo } from '@enact/webos/deviceinfo';\n\nconst pkg = require('../../package.json');\n\nconst APP_TITLE = pkg.description;\nconst APP_INFO = `${pkg.name} ${pkg.version}`;\n\nfunction useDeviceInfo() {\n  const [software, setSoftware] = useState('');\n  const [hardware, setHardware] = useState('');\n\n  useEffect(() => {\n    const platform = detect();\n\n    setHardware(navigator.platform);\n    setSoftware(`${platform.platformName} (${APP_INFO})`);\n\n    deviceinfo(\n      // @ts-expect-error\n      (device: { modelName: string; sdkVersion: string; version: string }) => {\n        setHardware(`${device.modelName}${device.version ? ` (${device.version})` : ''}`);\n        setSoftware(\n          `${platform.platformName} ${\n            device.sdkVersion ||\n            // @ts-expect-error\n            platform[platform.platformName]\n          } (${APP_INFO})`,\n        );\n      },\n    );\n  }, []);\n\n  const deviceInfo = useMemo(\n    () => ({\n      software,\n      hardware,\n      title: APP_TITLE,\n    }),\n    [software, hardware],\n  );\n\n  return deviceInfo;\n}\n\nexport default useDeviceInfo;\n","import { useCallback, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport useApiMutation from 'hooks/useApiMutation';\nimport useDeviceInfo from 'hooks/useDeviceInfo';\nimport useStorageState from 'hooks/useStorageState';\nimport { PATHS } from 'routes';\n\nfunction useDeviceAuthorizationEffect() {\n  const history = useHistory();\n  const deviceInfo = useDeviceInfo();\n  const { deviceAuthorizationAsync } = useApiMutation('deviceAuthorization');\n  const { deviceNotify } = useApiMutation('deviceNotify');\n  const [isLogged] = useStorageState<boolean>('is_logged');\n\n  const handleOnConfirm = useCallback(\n    (userCode: string, verificationUri: string) => {\n      history.replace(PATHS.Pair, {\n        userCode,\n        verificationUri,\n      });\n    },\n    [history],\n  );\n\n  useEffect(() => {\n    const timeoutId = setTimeout(async () => {\n      await deviceAuthorizationAsync([deviceInfo, handleOnConfirm]);\n\n      history.replace(PATHS.Home);\n    }, 500);\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [isLogged, deviceInfo, history, handleOnConfirm, deviceAuthorizationAsync]);\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      deviceNotify([deviceInfo]);\n    }, 2 * 1000);\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [deviceInfo, deviceNotify]);\n}\n\nexport default useDeviceAuthorizationEffect;\n","import { Switch, useHistory } from 'react-router-dom';\nimport { Panels, PanelsProps } from '@enact/moonstone/Panels';\nimport styled from 'styled-components';\n\nimport useBackButtonEffect from 'hooks/useBackButtonEffect';\nimport useDeviceAuthorizationEffect from 'hooks/useDeviceAuthorizationEffect';\n\nconst StyledPanels = styled(Panels)`\n  article {\n    padding: 0;\n  }\n`;\n\ntype Props = {} & PanelsProps;\n\nconst Views: React.FC<Props> = ({ children, ...props }) => {\n  const history = useHistory();\n\n  useBackButtonEffect(history.goBack);\n  useDeviceAuthorizationEffect();\n\n  return (\n    <StyledPanels noCloseButton {...props}>\n      <Switch>{children}</Switch>\n    </StyledPanels>\n  );\n};\n\nexport default Views;\n","import React from 'react';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { MemoryRouter } from 'react-router-dom';\nimport MoonstoneDecorator from '@enact/moonstone/MoonstoneDecorator';\n\nimport View from 'components/view';\nimport Views from 'containers/views';\nimport { PATHS } from 'routes';\n\nimport './styles.css';\n\nconst BookmarkView = React.lazy(() => import('views/booksmark'));\nconst BookmarksView = React.lazy(() => import('views/booksmarks'));\nconst CategoryView = React.lazy(() => import('views/category'));\nconst ChannelView = React.lazy(() => import('views/channel'));\nconst ChannelsView = React.lazy(() => import('views/channels'));\nconst CollectionView = React.lazy(() => import('views/collection'));\nconst CollectionsView = React.lazy(() => import('views/collections'));\nconst HistoryView = React.lazy(() => import('views/history'));\nconst HomeView = React.lazy(() => import('views/home'));\nconst IndexView = React.lazy(() => import('views/index'));\nconst ItemView = React.lazy(() => import('views/item'));\nconst NotFoundView = React.lazy(() => import('views/notFound'));\nconst PairView = React.lazy(() => import('views/pair'));\nconst SearchView = React.lazy(() => import('views/search'));\nconst SettingsView = React.lazy(() => import('views/settings'));\nconst SpeedView = React.lazy(() => import('views/speed'));\nconst TrailerView = React.lazy(() => import('views/trailer'));\nconst VideoView = React.lazy(() => import('views/video'));\nconst WatchingView = React.lazy(() => import('views/watching'));\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000,\n    },\n  },\n});\n\ntype Props = {};\n\nconst App: React.FC<Props> = (props) => {\n  return (\n    <MemoryRouter>\n      <QueryClientProvider client={queryClient}>\n        <Views {...props}>\n          <View path={PATHS.Index} component={IndexView} layout=\"fill\" exact />\n          <View path={PATHS.Home} component={HomeView} />\n          <View path={PATHS.Search} component={SearchView} />\n          <View path={PATHS.Category} component={CategoryView} />\n          <View path={PATHS.Watching} component={WatchingView} />\n          <View path={PATHS.Bookmark} component={BookmarkView} />\n          <View path={PATHS.Bookmarks} component={BookmarksView} />\n          <View path={PATHS.Collection} component={CollectionView} />\n          <View path={PATHS.Collections} component={CollectionsView} />\n          <View path={PATHS.Channel} component={ChannelView} layout=\"fill\" />\n          <View path={PATHS.Channels} component={ChannelsView} />\n          <View path={PATHS.History} component={HistoryView} />\n          <View path={PATHS.Item} component={ItemView} layout=\"fill\" />\n          <View path={PATHS.Video} component={VideoView} layout=\"fill\" />\n          <View path={PATHS.Trailer} component={TrailerView} layout=\"fill\" />\n          <View path={PATHS.Pair} component={PairView} layout=\"fill\" />\n          <View path={PATHS.Speed} component={SpeedView} />\n          <View path={PATHS.Settings} component={SettingsView} />\n          <View component={NotFoundView} />\n        </Views>\n      </QueryClientProvider>\n    </MemoryRouter>\n  );\n};\n\nexport default MoonstoneDecorator(App);\n","import './attachErrorHandler';\n\nimport { render } from 'react-dom';\n\nimport App from './App';\n\nconst app = <App />;\n\n// In a browser environment, render instead of exporting\nif (typeof window !== 'undefined') {\n  render(app, document.getElementById('root'));\n}\n\nexport default app;\n"],"sourceRoot":""}